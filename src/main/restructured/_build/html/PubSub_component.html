

<!DOCTYPE html>
<html class="writer-html5" lang="pl" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>1. PubSub Component &mdash; TigaseDoc 0.1 - dokumentacja</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/translations.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Indeks" href="genindex.html" />
    <link rel="search" title="Szukaj" href="search.html" />
    <link rel="next" title="2. Limitations" href="Limitations.html" />
    <link rel="prev" title="Tigase PubSub Component - Version 5.1.0" href="index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> TigaseDoc
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">1. PubSub Component</a></li>
<li class="toctree-l1"><a class="reference internal" href="Limitations.html">2. Limitations</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">TigaseDoc</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li><span class="section-number">1. </span>PubSub Component</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/PubSub_component.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <p>Welcome to Tigase PubSub component guide</p>
<div class="section" id="pubsub-component">
<h1><span class="section-number">1. </span>PubSub Component<a class="headerlink" href="#pubsub-component" title="Stały odnośnik do tego nagłówka">¶</a></h1>
<p>Tigase’s Publish Subscribe component is an <a class="reference external" href="http://www.xmpp.org/extensions/xep-0060.html">XEP-0060</a> compliant plugin handling all publish and subscribe activity within Tigase server. This is enabled as default with the pubsub name, however you may include the following line if you wish to customize it’s configuration.</p>
<div class="highlight-dsl notranslate"><div class="highlight"><pre><span></span>pubsub () {}
</pre></div>
</div>
<p>You may change the name so long as you specify the pubsub class within parenthesis.</p>
<div class="section" id="tigase-pubsub-release-notes">
<h2><span class="section-number">1.1. </span>Tigase Pubsub Release Notes<a class="headerlink" href="#tigase-pubsub-release-notes" title="Stały odnośnik do tego nagłówka">¶</a></h2>
<p>Welcome to Tigase Pubsub 5.0.0! This is a feature release for with a number of fixes and updates.</p>
<div class="section" id="tigase-pubsub-5-0-0-release-notes">
<h3><span class="section-number">1.1.1. </span>Tigase PubSub 5.0.0 Release Notes<a class="headerlink" href="#tigase-pubsub-5-0-0-release-notes" title="Stały odnośnik do tego nagłówka">¶</a></h3>
<div class="section" id="major-changes">
<h4><span class="section-number">1.1.1.1. </span>Major Changes<a class="headerlink" href="#major-changes" title="Stały odnośnik do tego nagłówka">¶</a></h4>
<ul class="simple">
<li><p>Add publishing executor with rate limiting</p></li>
<li><p>Optimisations and fixes</p></li>
</ul>
</div>
<div class="section" id="all-changes">
<h4><span class="section-number">1.1.1.2. </span>All Changes<a class="headerlink" href="#all-changes" title="Stały odnośnik do tego nagłówka">¶</a></h4>
<ul class="simple">
<li><p><a class="reference external" href="https://projects.tigase.net/issue/pubsub-102">#pubsub-102</a>: Add publishing executor with rate limiting</p></li>
<li><p><a class="reference external" href="https://projects.tigase.net/issue/pubsub-103">#pubsub-103</a>: Empty message notification id attribute</p></li>
<li><p><a class="reference external" href="https://projects.tigase.net/issue/pubsub-105">#pubsub-105</a>: NPE in RetrieveItemsModule</p></li>
<li><p><a class="reference external" href="https://projects.tigase.net/issue/pubsub-106">#pubsub-106</a>: NPE in PubsubPublishModule?Eventbus</p></li>
<li><p><a class="reference external" href="https://projects.tigase.net/issue/pubsub-107">#pubsub-107</a>: disco#items feature returned on disco#info request for PubSub node item</p></li>
<li><p><a class="reference external" href="https://projects.tigase.net/issue/pubsub-108">#pubsub-108</a>: Fix Missing notification for published events</p></li>
<li><p><a class="reference external" href="https://projects.tigase.net/issue/pubsub-110">#pubsub-110</a>: Fix Deadlock in TigPubSubRemoveService SP on MySQL</p></li>
<li><p><a class="reference external" href="https://projects.tigase.net/issue/pubsub-111">#pubsub-111</a>: Fix SQLException: At least one parameter to the current statement is uninitialized.</p></li>
<li><p><a class="reference external" href="https://projects.tigase.net/issue/pubsub-113">#pubsub-113</a>: Fix StackOverflowError in LRUCacheWithFuture</p></li>
<li><p><a class="reference external" href="https://projects.tigase.net/issue/pubsub-114">#pubsub-114</a>: Fix pubsub#persist_items is not advertised</p></li>
<li><p><a class="reference external" href="https://projects.tigase.net/issue/pubsub-115">#pubsub-115</a>: Fix Cannot add or update a child row: a foreign key constraint fails (<code class="docutils literal notranslate"><span class="pre">tigasedb</span></code>.<code class="docutils literal notranslate"><span class="pre">tig_pubsub_items</span></code>, CONSTRAINT <code class="docutils literal notranslate"><span class="pre">tig_pubsub_items_ibfk_1</span></code> FOREIGN KEY (<code class="docutils literal notranslate"><span class="pre">node_id</span></code>) REFERENCES <code class="docutils literal notranslate"><span class="pre">tig_pubsub_nodes</span></code> (<code class="docutils literal notranslate"><span class="pre">node_id</span></code>))</p></li>
<li><p><a class="reference external" href="https://projects.tigase.net/issue/pubsub-119">#pubsub-119</a>: Fix NPE in DiscoveryModule</p></li>
<li><p><a class="reference external" href="https://projects.tigase.net/issue/pubsub-120">#pubsub-120</a>: Fix Empty element in POST payload is incorrectly parsed</p></li>
<li><p><a class="reference external" href="https://projects.tigase.net/issue/pubsub-121">#pubsub-121</a>: Use String.intern() for PEP CAPS nodes string</p></li>
<li><p><a class="reference external" href="https://projects.tigase.net/issue/pubsub-124">#pubsub-124</a>: Fix PubSub sends notifications about last published item on each presence received from subscriber.</p></li>
<li><p><a class="reference external" href="https://projects.tigase.net/issue/pubsub-125">#pubsub-125</a>: Reported features <code class="docutils literal notranslate"><span class="pre">pubsub#metadata</span></code> should be <code class="docutils literal notranslate"><span class="pre">pubsub#meta-data</span></code></p></li>
<li><p><a class="reference external" href="https://projects.tigase.net/issue/pubsub-126">#pubsub-126</a>: Fix Deadlocks in MySQL schema</p></li>
<li><p><a class="reference external" href="https://projects.tigase.net/issue/pubsub-127">#pubsub-127</a>: Fix NPE in UserEntry.remove</p></li>
<li><p><a class="reference external" href="https://projects.tigase.net/issue/pubsub-128">#pubsub-128</a>: Fix PatternSyntaxException for users with emoticons in resource</p></li>
</ul>
</div>
</div>
<div class="section" id="previous-releases">
<h3><span class="section-number">1.1.2. </span>Previous Releases<a class="headerlink" href="#previous-releases" title="Stały odnośnik do tego nagłówka">¶</a></h3>
<div class="section" id="announcement">
<h4><span class="section-number">1.1.2.1. </span>Announcement<a class="headerlink" href="#announcement" title="Stały odnośnik do tego nagłówka">¶</a></h4>
<div class="section" id="id1">
<h5><span class="section-number">1.1.2.1.1. </span>Major changes<a class="headerlink" href="#id1" title="Stały odnośnik do tego nagłówka">¶</a></h5>
<p>Tigase pubsub component has undergone a few major changes to our code and structure. To continue to use Tigase pubsub component, a few changes may be needed to be made to your systems. Please see them below:</p>
<p>Database schema changes</p>
<p>Current version comes with changes to database schema to improve JID comparison during lookup of nodes, subscriptions, affiliations, etc.</p>
<p>To continue usage of new versions of pubsub component it is required to manually load new component database schema, see <a class="reference external" href="#databasePreparation">database preparation</a> section for more information.</p>
<div class="admonition warning">
<p class="admonition-title">Ostrzeżenie</p>
<p>Loading of new database schema is required to use new version of pubsub component.</p>
</div>
<p>Changes in REST API</p>
<p>We continuously work on improving usability and making our REST API easier to use we added support for handling JSON requests in REST API for pubsub. At the same time we decided to slightly modify responses in XML sent by REST API to make responses in JSON and XML similar.</p>
<p>For more informations about current REST API please look into <a class="reference external" href="#restAPI">Rest API</a> section.</p>
</div>
<div class="section" id="new-features">
<h5><span class="section-number">1.1.2.1.2. </span>New features<a class="headerlink" href="#new-features" title="Stały odnośnik do tego nagłówka">¶</a></h5>
<p>Support for using separate database for different domains</p>
<p>Since this version it is possible to use separate pubsub nodes and items based on domains. This allows you to configure component to store informations about nodes and items for particular domain to different database.</p>
<p>For more informations please look into <a class="reference external" href="#multidb">using multiple databases</a>.</p>
<p>Support for MAM</p>
<p>In this version we added support for <a class="reference external" href="http://xmpp.org/extensions/xep-0313.html:">XEP-0313: Message Archive Management</a> protocol which allows any MAM compatible XMPP client with pubsub support to retrieve items published on pubsub nodes using MAM protocol for querying.</p>
</div>
</div>
</div>
</div>
<div class="section" id="configuration">
<h2><span class="section-number">1.2. </span>Configuration<a class="headerlink" href="#configuration" title="Stały odnośnik do tego nagłówka">¶</a></h2>
<div class="section" id="pubsub-naming">
<h3><span class="section-number">1.2.1. </span>Pubsub naming<a class="headerlink" href="#pubsub-naming" title="Stały odnośnik do tego nagłówka">¶</a></h3>
<p>Within Tigase, all pubsub component address MUST be domain-based address and not a JID style address. This was made to simplify communications structure. Tigase will automatically set component names to pubsub.domain, however any messages send to <a class="reference external" href="mailto:pubsub&#37;&#52;&#48;domain">pubsub<span>&#64;</span>domain</a> will result in a <code class="docutils literal notranslate"><span class="pre">SERVICE_UNAVAILABLE</span></code> error.</p>
<p>Pubsub nodes within Tigase can be found as a combination of JID and node where nodes will be identified akin to service discovery. For example, to address a friendly node, use the following structure:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;iq</span> <span class="na">to=</span><span class="s">&#39;pubsub.domain&#39;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;query</span> <span class="na">node=</span><span class="s">&#39;friendly node&#39;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/iq&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="configure-roster-maximum-size">
<h3><span class="section-number">1.2.2. </span>Configure Roster Maximum size<a class="headerlink" href="#configure-roster-maximum-size" title="Stały odnośnik do tego nagłówka">¶</a></h3>
<p>Administrators can configure the maximum allowable roster size per user via the config.tdsl file.</p>
<div class="highlight-dsl notranslate"><div class="highlight"><pre><span></span>&#39;sess-man&#39; {
    &#39;jabber:iqa:roster&#39; {
        max_roster_size = &#39;100&#39;
    }
}
</pre></div>
</div>
<p>This sets the roster limit to 100 entries per user. It can be set to any integer, however by default no limit is set and no configuration is set in <code class="docutils literal notranslate"><span class="pre">config.tdsl</span></code> file.</p>
</div>
<div class="section" id="store-full-xml-of-last-presence">
<h3><span class="section-number">1.2.3. </span>Store Full XML of Last Presence<a class="headerlink" href="#store-full-xml-of-last-presence" title="Stały odnośnik do tego nagłówka">¶</a></h3>
<p>Tigase can store a more detailed <code class="docutils literal notranslate"><span class="pre">&lt;unavailable/&gt;</span></code> presence stanza to include timestamps and other information.</p>
<div class="section" id="requirements">
<h4><span class="section-number">1.2.3.1. </span>Requirements<a class="headerlink" href="#requirements" title="Stały odnośnik do tego nagłówka">¶</a></h4>
<p>Ensure that <code class="docutils literal notranslate"><span class="pre">presence-offline</span></code> plugin is enabled in config.tdsl. To do this, add be sure <code class="docutils literal notranslate"><span class="pre">presence-offline</span></code> is listed under <code class="docutils literal notranslate"><span class="pre">sess-man</span></code></p>
<div class="highlight-dsl notranslate"><div class="highlight"><pre><span></span>&#39;sess-man&#39; {
    &#39;presence-offline&#39; () {}
}
</pre></div>
</div>
<p>The following two lines in <code class="docutils literal notranslate"><span class="pre">sess-man</span></code> configure options to broadcast probes to offline users.</p>
<div class="highlight-dsl notranslate"><div class="highlight"><pre><span></span>&#39;sess-man&#39; {
    &#39;skip-offline&#39; = &#39;false&#39;
    &#39;skip-offline-sys&#39; = &#39;false&#39;
}
</pre></div>
</div>
<p>Without these lines, Tigase will not send presence probes to users that the server knows to be offline.</p>
<p>The full XML presence is stored under the tig_pairs table with a pkey of <code class="docutils literal notranslate"><span class="pre">last-unavailable-presence</span></code> will look like this:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;presence</span> <span class="na">from=</span><span class="s">&quot;user@example.com&quot;</span> <span class="na">xmlns=</span><span class="s">&quot;jabber:client&quot;</span> <span class="na">type=</span><span class="s">&quot;unavailable&quot;</span><span class="nt">&gt;</span>
<span class="nt">&lt;status&gt;</span>Logged out<span class="nt">&lt;/status&gt;</span>
<span class="nt">&lt;delay</span> <span class="na">stamp=</span><span class="s">&quot;2015-12-29T16:51:50.748Z&quot;</span> <span class="na">xmlns=</span><span class="s">&quot;urn:xmpp:delay&quot;</span><span class="nt">/&gt;&lt;/presence&gt;</span>
</pre></div>
</div>
<p>As you can see, the plugin has added a delay stamp which indicates the last time they were seen online. This may be suppressed by using the following line in your config.tdsl file.</p>
<div class="highlight-dsl notranslate"><div class="highlight"><pre><span></span>&#39;sess-man&#39; {
    &#39;delay-stamp&#39; = &#39;false&#39;
}
</pre></div>
</div>
<p>You may also limit probe responses only to newly connected resources.</p>
<div class="highlight-dsl notranslate"><div class="highlight"><pre><span></span>&#39;sess-man&#39; {
    &#39;probe-full-jid&#39; = &#39;true&#39;
}
</pre></div>
</div>
<p>When a user logs on, they will receive the same full unavailable presence statements from contacts not logged in. Also the repository entry containing their last unavailable presence will be removed.</p>
<p><strong>NOTE: This will increase traffic with users with many people on their rosters.</strong></p>
</div>
</div>
<div class="section" id="using-separate-store">
<h3><span class="section-number">1.2.4. </span>Using separate store<a class="headerlink" href="#using-separate-store" title="Stały odnośnik do tego nagłówka">¶</a></h3>
<p>As mentioned above, by default Tigase pubsub component uses default data source configured for Tigase XMPP Server. It is possible to use separate store by pubsub component. To do so you need to configure new <code class="docutils literal notranslate"><span class="pre">DataSource</span></code> in <code class="docutils literal notranslate"><span class="pre">dataSource</span></code> section. Here we will use <code class="docutils literal notranslate"><span class="pre">pubsub-store</span></code> as name of newly configured data source. Additionally you need to pass name of newly configured data source to <code class="docutils literal notranslate"><span class="pre">dataSourceName</span></code> property of default DAO of pubsub component.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dataSource</span> <span class="p">{</span>
    <span class="n">pubsub</span><span class="o">-</span><span class="n">store</span> <span class="p">()</span> <span class="p">{</span>
        <span class="n">uri</span> <span class="o">=</span> <span class="s1">&#39;jdbc:postgresql://server/pubsub-database&#39;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="n">pubsub</span> <span class="p">()</span> <span class="p">{</span>
    <span class="n">dao</span> <span class="p">{</span>
        <span class="n">default</span> <span class="p">()</span> <span class="p">{</span>
            <span class="n">dataSourceName</span> <span class="o">=</span> <span class="s1">&#39;pubsub-store&#39;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>It is also possible to configure separate store for particular domain, ie. <code class="docutils literal notranslate"><span class="pre">pubsub.example.com</span></code>. Here we will configure data source with name <code class="docutils literal notranslate"><span class="pre">pubsub.example.com</span></code> and use it to store data for pubsub nodes and items at <code class="docutils literal notranslate"><span class="pre">pubsub.example.com</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dataSource</span> <span class="p">{</span>
    <span class="s1">&#39;pubsub.example.com&#39;</span> <span class="p">()</span> <span class="p">{</span>
        <span class="n">uri</span> <span class="o">=</span> <span class="s1">&#39;jdbc:postgresql://server/example-database&#39;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="n">pubsub</span> <span class="p">()</span> <span class="p">{</span>
    <span class="n">dao</span> <span class="p">{</span>
        <span class="s1">&#39;pubsub.example.com&#39;</span> <span class="p">()</span> <span class="p">{</span>
          <span class="c1"># we may not set dataSourceName as it matches name of domain</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Informacja</p>
<p>With this configuration, data for other domains than <code class="docutils literal notranslate"><span class="pre">pubsub.example.com</span></code> will be stored in default data source.</p>
</div>
</div>
<div class="section" id="enabling-pep-support">
<h3><span class="section-number">1.2.5. </span>Enabling PEP support<a class="headerlink" href="#enabling-pep-support" title="Stały odnośnik do tego nagłówka">¶</a></h3>
<p>To enable <a class="reference external" href="http://xmpp.org/extensions/xep-0163.html">XEP-0163: Personal Eventing Protocol</a> support it is required to set <code class="docutils literal notranslate"><span class="pre">persistent-pep</span></code> property of pubsub component to <code class="docutils literal notranslate"><span class="pre">true</span></code>, set <code class="docutils literal notranslate"><span class="pre">send-last-published-item-on-presence</span></code> property of component to <code class="docutils literal notranslate"><span class="pre">true</span></code> and enable <code class="docutils literal notranslate"><span class="pre">pep</span></code> SessionManager processor.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pubsub</span> <span class="p">()</span> <span class="p">{</span>
    <span class="n">persistent</span><span class="o">-</span><span class="n">pep</span> <span class="o">=</span> <span class="n">true</span>
    <span class="n">send</span><span class="o">-</span><span class="n">last</span><span class="o">-</span><span class="n">published</span><span class="o">-</span><span class="n">item</span><span class="o">-</span><span class="n">on</span><span class="o">-</span><span class="n">presence</span> <span class="o">=</span> <span class="n">true</span>
<span class="p">}</span>

<span class="n">sess</span><span class="o">-</span><span class="n">man</span> <span class="p">()</span> <span class="p">{</span>
    <span class="n">pep</span> <span class="p">()</span> <span class="p">{</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Informacja</p>
<p>If your pubsub component uses different name than <code class="docutils literal notranslate"><span class="pre">pubsub</span></code> then you need to set <code class="docutils literal notranslate"><span class="pre">pubsub-jid</span></code> property of <code class="docutils literal notranslate"><span class="pre">pep</span></code> processor to JID of pubsub component make it aware of a different name of a pubsub component.</p>
</div>
<p><strong>Example with pubsub component named ``events`` hosted at server named ``servername.com`` and enabled PEP.</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">events</span> <span class="p">()</span> <span class="p">{</span>
    <span class="n">persistent</span><span class="o">-</span><span class="n">pep</span> <span class="o">=</span> <span class="n">true</span>
    <span class="n">send</span><span class="o">-</span><span class="n">last</span><span class="o">-</span><span class="n">published</span><span class="o">-</span><span class="n">item</span><span class="o">-</span><span class="n">on</span><span class="o">-</span><span class="n">presence</span> <span class="o">=</span> <span class="n">true</span>
<span class="p">}</span>
<span class="n">sess</span><span class="o">-</span><span class="n">man</span> <span class="p">()</span> <span class="p">{</span>
    <span class="n">pep</span> <span class="p">()</span> <span class="p">{</span>
        <span class="s1">&#39;pubsub-jid&#39;</span> <span class="o">=</span> <span class="s1">&#39;events@servername.com&#39;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="enabling-rest-api">
<h3><span class="section-number">1.2.6. </span>Enabling REST API<a class="headerlink" href="#enabling-rest-api" title="Stały odnośnik do tego nagłówka">¶</a></h3>
<p>To use REST API for pubsub component it is required that:</p>
<ul class="simple">
<li><p>Tigase HTTP API component is installed and configured properly. For information about HTTP API component installation please look into <a class="reference external" href="#compHTTPAPI">HTTP component documentation</a>.</p></li>
<li><p>Tigase pubsub REST scripts are copied to HTTP API REST scripts directory In installation package this is already done and scripts are in proper locations. dd* JID of HTTP API component needs to be added to list of trusted jids of Tigase pubsub component <code class="docutils literal notranslate"><span class="pre">trusted</span></code> property (if <code class="docutils literal notranslate"><span class="pre">http</span></code> is name of HTTP API component)</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pubsub</span> <span class="p">()</span> <span class="p">{</span>
    <span class="n">trusted</span> <span class="o">=</span> <span class="p">[</span> <span class="s1">&#39;http@</span><span class="si">{clusterNode}</span><span class="s1">&#39;</span> <span class="p">];</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="changing-nodes-cache-size">
<h3><span class="section-number">1.2.7. </span>Changing nodes cache size<a class="headerlink" href="#changing-nodes-cache-size" title="Stały odnośnik do tego nagłówka">¶</a></h3>
<p>By default Tigase pubsub component caches node configuration of 2000 last loaded nodes. If there are many requests to database to load node configuration and your installation contains many nodes it may be a good idea to increase number of cached nodes.</p>
<p>To do this you need to set <code class="docutils literal notranslate"><span class="pre">pubsub-repository-cache-size</span></code> property of pubsub component to new size.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pubsub</span> <span class="p">()</span> <span class="p">{</span>
    <span class="n">pubsub</span><span class="o">-</span><span class="n">repository</span><span class="o">-</span><span class="n">cache</span><span class="o">-</span><span class="n">size</span> <span class="o">=</span> <span class="mi">4000</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="section" id="enable-sending-last-published-item-on-presence">
<h4><span class="section-number">1.2.7.1. </span>Enable sending last published item on presence<a class="headerlink" href="#enable-sending-last-published-item-on-presence" title="Stały odnośnik do tego nagłówka">¶</a></h4>
<p>By default it is not possible to use delivery of last published item when users broadcasts initial presence. To do so you need to set <code class="docutils literal notranslate"><span class="pre">send-last-published-item-on-presence</span></code> of pubsub component to <code class="docutils literal notranslate"><span class="pre">true</span></code>. This will allow you to configure nodes to send last published item on presence.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pubsub</span> <span class="p">()</span> <span class="p">{</span>
    <span class="n">send</span><span class="o">-</span><span class="n">last</span><span class="o">-</span><span class="n">published</span><span class="o">-</span><span class="n">item</span><span class="o">-</span><span class="n">on</span><span class="o">-</span><span class="n">presence</span> <span class="o">=</span> <span class="n">true</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="throttling-sending-notifications">
<h3><span class="section-number">1.2.8. </span>Throttling sending notifications<a class="headerlink" href="#throttling-sending-notifications" title="Stały odnośnik do tego nagłówka">¶</a></h3>
<p>Notifications sent by PubSub component may be sent in large batches, if you have a nodes with a lot of subscribers. In those cases, it is useful to throttle publications to improve behaviour and performance of other parts of Tigase XMPP Server.</p>
<p>To achieve that, PubSub throttles generate notifications to specified throughput. By default it is set to 5k packets for each CPU core available per second.</p>
<p>To set it to a different value, you can set <code class="docutils literal notranslate"><span class="pre">limit</span></code> property of <code class="docutils literal notranslate"><span class="pre">publishExecutor</span></code> bean to the expected number of publications per second, ie. 100000;</p>
<div class="admonition note">
<p class="admonition-title">Informacja</p>
<p>This value is a number of total throughput, and will not be adjusted by the number of available CPU cores.</p>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pubsub</span> <span class="p">()</span> <span class="p">{</span>
    <span class="n">publishExecutor</span> <span class="p">()</span> <span class="p">{</span>
        <span class="n">limit</span> <span class="o">=</span> <span class="mi">10000</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Publication rate is also adjusted to current memory usage on a 4 point scale adjusted to the value of two configuration options: <code class="docutils literal notranslate"><span class="pre">highMemoryUsageLimit</span></code> and <code class="docutils literal notranslate"><span class="pre">criticalMemoryUsageLimit</span></code> (with default values: 90% and 98% respectively): * <code class="docutils literal notranslate"><span class="pre">normal</span></code> - if memory usage is below <code class="docutils literal notranslate"><span class="pre">highMemoryUsageLimit</span></code> (i.e. below 90%) * <code class="docutils literal notranslate"><span class="pre">high</span></code> - memory usage less than halfway between <code class="docutils literal notranslate"><span class="pre">highMemoryUsageLimit</span></code> and <code class="docutils literal notranslate"><span class="pre">veryHigh</span></code> (i.e. between 90% and 94%) * <code class="docutils literal notranslate"><span class="pre">veryHigh</span></code> - memory usage more than halfway between <code class="docutils literal notranslate"><span class="pre">highMemoryUsageLimit</span></code> and <code class="docutils literal notranslate"><span class="pre">veryHigh</span></code> (i.e. between 94% and 98%) * <code class="docutils literal notranslate"><span class="pre">critical</span></code> - if memory usage is above <code class="docutils literal notranslate"><span class="pre">criticalMemoryUsageLimit</span></code> (i.e. above 98%)</p>
<p>It’s possible to adjust values of the high and critical limits in publisher bean:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pubsub</span> <span class="p">()</span> <span class="p">{</span>
    <span class="n">publishExecutor</span> <span class="p">()</span> <span class="p">{</span>
        <span class="n">highMemoryUsageLimit</span> <span class="o">=</span> <span class="mi">90</span>
        <span class="n">criticalMemoryUsageLimit</span> <span class="o">=</span> <span class="mi">98</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="disable-automatic-subscription-of-node-creator">
<h3><span class="section-number">1.2.9. </span>Disable automatic subscription of node creator<a class="headerlink" href="#disable-automatic-subscription-of-node-creator" title="Stały odnośnik do tego nagłówka">¶</a></h3>
<p>During creation of node pubsub component subscribes creator to pubsub node and delivers notifications to creator. If in your case you do not want this behavior, you may set <code class="docutils literal notranslate"><span class="pre">auto-subscribe-node-creator</span></code> property of pubsub component to <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pubsub</span> <span class="p">()</span> <span class="p">{</span>
    <span class="n">auto</span><span class="o">-</span><span class="n">subscribe</span><span class="o">-</span><span class="n">node</span><span class="o">-</span><span class="n">creator</span> <span class="o">=</span> <span class="n">false</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="database">
<h2><span class="section-number">1.3. </span>Database<a class="headerlink" href="#database" title="Stały odnośnik do tego nagłówka">¶</a></h2>
<div class="section" id="preparation-of-database">
<h3><span class="section-number">1.3.1. </span>Preparation of database<a class="headerlink" href="#preparation-of-database" title="Stały odnośnik do tego nagłówka">¶</a></h3>
<p>Before you will be able to use Tigase PubSub Component you need to initialize database. We provide few schemas for this component for MySQL, PostgreSQL, SQLServer and DerbyDB.</p>
<p>They are placed in <code class="docutils literal notranslate"><span class="pre">database/</span></code> directory of installation package and named in <code class="docutils literal notranslate"><span class="pre">dbtype-pubsub-version.sql</span></code>, where <code class="docutils literal notranslate"><span class="pre">dbname</span></code> in name of database type which this schema supports and <code class="docutils literal notranslate"><span class="pre">version</span></code> is version of a PubSub component for which this schema is designed.</p>
<p>You need to manually select schema for correct database and component and load this schema to database. For more information about loading database schema look into <a class="reference external" href="#databasePreperation">database preperation</a> section of this guide.</p>
</div>
<div class="section" id="upgrade-of-database-schema">
<h3><span class="section-number">1.3.2. </span>Upgrade of database schema<a class="headerlink" href="#upgrade-of-database-schema" title="Stały odnośnik do tego nagłówka">¶</a></h3>
<p>Database schema for our components may change between versions and if so it needs to be updated before new version may be started. To upgrade schema please follow instructions from the <a class="reference external" href="#databasePreperation">database preperation</a> section.</p>
<div class="admonition note">
<p class="admonition-title">Informacja</p>
<p>If you use SNAPSHOT builds then schema may change for same version as this are versions we are still working on.</p>
</div>
</div>
<div class="section" id="schema-description">
<h3><span class="section-number">1.3.3. </span>Schema description<a class="headerlink" href="#schema-description" title="Stały odnośnik do tego nagłówka">¶</a></h3>
<p>Tigase PubSub component uses few tables and stored procedures. To make it easier to identify tables and stored procedures used by PubSub component they are prefixed with <code class="docutils literal notranslate"><span class="pre">tig_pubsub_</span></code>.</p>
<div class="section" id="table-tig-pubsub-service-jids">
<h4><span class="section-number">1.3.3.1. </span>Table <code class="docutils literal notranslate"><span class="pre">tig_pubsub_service_jids</span></code><a class="headerlink" href="#table-tig-pubsub-service-jids" title="Stały odnośnik do tego nagłówka">¶</a></h4>
<p>This table stores all jids for which PubSub component contains nodes.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 17%" />
<col style="width: 35%" />
<col style="width: 48%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Field</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Comments</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>service_id</p></td>
<td><p>Database ID of a service JID</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>service_jid</p></td>
<td><p>Value of a service JID</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>service_jid_sha1</p></td>
<td><p>SHA1 value of lowercased service JID</p></td>
<td><p>Used for proper bare JID comparison during lookup.</p>
<p>(N/A to PostgreSQL schema)</p>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="table-tig-pubsub-jids">
<h4><span class="section-number">1.3.3.2. </span>Table <code class="docutils literal notranslate"><span class="pre">tig_pubsub_jids</span></code><a class="headerlink" href="#table-tig-pubsub-jids" title="Stały odnośnik do tego nagłówka">¶</a></h4>
<p>This table stores all jids related to PubSub nodes, ie. subscriber, affiliates, creators, publishers, etc.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 36%" />
<col style="width: 54%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Field</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Comments</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>jid_id</p></td>
<td><p>Database ID of a bare JID</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>jid</p></td>
<td><p>Value of a bare JID</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>jid_sha1</p></td>
<td><p>SHA1 value of lowercased bare JID</p></td>
<td><p>Used for proper bare JID comparison during lookup.</p>
<p>(N/A to PostgreSQL schema)</p>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="table-tig-pubsub-nodes">
<h4><span class="section-number">1.3.3.3. </span>Table <code class="docutils literal notranslate"><span class="pre">tig_pubsub_nodes</span></code><a class="headerlink" href="#table-tig-pubsub-nodes" title="Stały odnośnik do tego nagłówka">¶</a></h4>
<p>Table stores nodes tree structure and node configuration.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 13%" />
<col style="width: 35%" />
<col style="width: 52%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Field</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Comments</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>node_id</p></td>
<td><p>Database ID of a node</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>service_id</p></td>
<td><p>ID of service JID</p></td>
<td><p>References <code class="docutils literal notranslate"><span class="pre">service_id</span></code> from <code class="docutils literal notranslate"><span class="pre">tig_pubsub_service_jids</span></code></p></td>
</tr>
<tr class="row-even"><td><p>name</p></td>
<td><p>Name of PubSub node</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>name_sha1</p></td>
<td><p>SHA1 of PubSub node name</p></td>
<td><p>Used for indexing and faster lookup.</p>
<p>(N/A to PostgreSQL schema)</p>
</td>
</tr>
<tr class="row-even"><td><p>type</p></td>
<td><p>Type of PubSub node</p></td>
<td><p>0 - collection</p>
<p>1 - leaf</p>
</td>
</tr>
<tr class="row-odd"><td><p>title</p></td>
<td><p>Title of PubSub node</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>description</p></td>
<td><p>Description of a node</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>creator_id</p></td>
<td><p>ID of JID of creator</p></td>
<td><p>References <code class="docutils literal notranslate"><span class="pre">jid_id</span></code> from <code class="docutils literal notranslate"><span class="pre">tig_pubsub_jids</span></code></p></td>
</tr>
<tr class="row-even"><td><p>creation_date</p></td>
<td><p>Timestamp of creation time</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>configuration</p></td>
<td><p>Serialized configuration of PubSub node</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>collection_id</p></td>
<td><p>Points collection (parent node)</p></td>
<td><p>References <code class="docutils literal notranslate"><span class="pre">node_id</span></code> from <code class="docutils literal notranslate"><span class="pre">tig_pubsub_nodes</span></code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="table-tig-pubsub-affiliations">
<h4><span class="section-number">1.3.3.4. </span>Table <code class="docutils literal notranslate"><span class="pre">tig_pubsub_affiliations</span></code><a class="headerlink" href="#table-tig-pubsub-affiliations" title="Stały odnośnik do tego nagłówka">¶</a></h4>
<p>Table stores affiliations between PubSub nodes and jids.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 16%" />
<col style="width: 23%" />
<col style="width: 61%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Field</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Comments</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>node_id</p></td>
<td><p>ID of a node</p></td>
<td><p>References <code class="docutils literal notranslate"><span class="pre">node_id</span></code> from <code class="docutils literal notranslate"><span class="pre">tig_pubsub_nodes</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>jid_id</p></td>
<td><p>ID of a user JID</p></td>
<td><p>References <code class="docutils literal notranslate"><span class="pre">jid_id</span></code> from <code class="docutils literal notranslate"><span class="pre">tig_pubsub_jids</span></code></p></td>
</tr>
<tr class="row-even"><td><p>affiliation</p></td>
<td><p>Affiliation value</p></td>
<td></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="table-tig-pubsub-subscriptions">
<h4><span class="section-number">1.3.3.5. </span>Table <code class="docutils literal notranslate"><span class="pre">tig_pubsub_subscriptions</span></code><a class="headerlink" href="#table-tig-pubsub-subscriptions" title="Stały odnośnik do tego nagłówka">¶</a></h4>
<p>Table stores subscriptions of jids to PubSub nodes.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 19%" />
<col style="width: 25%" />
<col style="width: 56%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Field</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Comments</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>node_id</p></td>
<td><p>ID of a node</p></td>
<td><p>References <code class="docutils literal notranslate"><span class="pre">node_id</span></code> from <code class="docutils literal notranslate"><span class="pre">tig_pubsub_nodes</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>jid_id</p></td>
<td><p>ID of a user JID</p></td>
<td><p>References <code class="docutils literal notranslate"><span class="pre">jid_id</span></code> from <code class="docutils literal notranslate"><span class="pre">tig_pubsub_jids</span></code></p></td>
</tr>
<tr class="row-even"><td><p>subscription</p></td>
<td><p>Subscription value</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>subscription_id</p></td>
<td><p>Id of a subscription</p></td>
<td></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="table-tig-pubsub-items">
<h4><span class="section-number">1.3.3.6. </span>Table <code class="docutils literal notranslate"><span class="pre">tig_pubsub_items</span></code><a class="headerlink" href="#table-tig-pubsub-items" title="Stały odnośnik do tego nagłówka">¶</a></h4>
<p>Table stores items of PubSub nodes.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15%" />
<col style="width: 36%" />
<col style="width: 49%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Field</p></td>
<td><p>Description</p></td>
<td><p>Comments</p></td>
</tr>
<tr class="row-even"><td><p>node_id</p></td>
<td><p>ID of a node</p></td>
<td><p>References <code class="docutils literal notranslate"><span class="pre">node_id</span></code> from <code class="docutils literal notranslate"><span class="pre">tig_pubsub_nodes</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>id</p></td>
<td><p>Id of an items</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>id_sha1</p></td>
<td><p>SHA1 of item id</p></td>
<td><p>Indexed and used for faster lookup</p>
<p>(N/A to PostgreSQL schema)</p>
</td>
</tr>
<tr class="row-odd"><td><p>creation_date</p></td>
<td><p>Creation date</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>publisher_id</p></td>
<td><p>ID of publisher JID</p></td>
<td><p>References <code class="docutils literal notranslate"><span class="pre">jid_id</span></code> from <code class="docutils literal notranslate"><span class="pre">tig_pubsub_jids</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>update_date</p></td>
<td><p>Timestamp of last item modification</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>data</p></td>
<td><p>Item payload</p></td>
<td></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="pubsub-schema-changes">
<h3><span class="section-number">1.3.4. </span>PubSub Schema Changes<a class="headerlink" href="#pubsub-schema-changes" title="Stały odnośnik do tego nagłówka">¶</a></h3>
<p>Tigase PubSub Component is currently version 3.3.0 which is introduced in Tigase server v8.0.0.</p>
<div class="section" id="pubsub-3-2-0-changes">
<h4><span class="section-number">1.3.4.1. </span>PubSub 3.2.0 Changes<a class="headerlink" href="#pubsub-3-2-0-changes" title="Stały odnośnik do tego nagłówka">¶</a></h4>
<p>PubSub v 3.2.0 adds a new procedure TigPubSubGetNodeMeta which supports PubSub metadata retrieval while conducting a disco#info query on nodes.</p>
<p>You will need to upgrade your database if you are not using v3.2.0 schema. Tigase will report being unable to load PubSub component if you do not have this schema version.</p>
<p>The MySQL schema can be found <a class="reference external" href="https://projects.tigase.org/projects/tigase-pubsub/repository/revisions/master/entry/database/mysql-pubsub-schema-3.2.0.sql">Here</a>.</p>
<p>The Derby schema can be found <a class="reference external" href="https://projects.tigase.org/projects/tigase-pubsub/repository/changes/database/derby-pubsub-schema-3.2.0.sql">Here</a>.</p>
<p>The PostGRESQL schema can be found <a class="reference external" href="https://projects.tigase.org/projects/tigase-pubsub/repository/changes/database/postgresql-pubsub-schema-3.2.0.sql">Here</a>.</p>
<p>The MS SQL schema can be found <a class="reference external" href="https://projects.tigase.org/projects/tigase-pubsub/repository/changes/database/sqlserver-pubsub-schema-3.2.0.sql">Here</a>.</p>
<p>The same files are also included in all distributions of v8.0.0 in <code class="docutils literal notranslate"><span class="pre">[tigaseroot]/database/</span></code> . All changes to database schema are meant to be backward compatible.</p>
<p>For instructions how to manually upgrade the databases, please refer to <a class="reference external" href="#tigaseServer71">Tigase v7.1.0 Schema Updates section</a>.</p>
</div>
<div class="section" id="upgrading-older-installations-pre-v3-0-0-schema">
<h4><span class="section-number">1.3.4.2. </span>Upgrading older installations (pre-v3.0.0 Schema)<a class="headerlink" href="#upgrading-older-installations-pre-v3-0-0-schema" title="Stały odnośnik do tego nagłówka">¶</a></h4>
<p>To update older installations of Tigase to the PubSub Schema v3.0.0 follow these instructions. Note this should be done before upgrading to PubSub v3.1.0.</p>
<p>Step by Step guide.</p>
<p>Prepare Old Database for Upgrade</p>
<p>In <code class="docutils literal notranslate"><span class="pre">database</span></code> directory of Tigase installation you will find SQL files which will prepare old database schema for upgrade using following this naming pattern: <code class="docutils literal notranslate"><span class="pre">&lt;database_type&gt;-pubsub-schema-3.0.0-pre-upgrade.sql</span></code> Where <code class="docutils literal notranslate"><span class="pre">&lt;database_type&gt;</span></code> can be one of the following: <code class="docutils literal notranslate"><span class="pre">mysql</span></code>, <code class="docutils literal notranslate"><span class="pre">sqlserver</span></code>, ie. for MySQL you will find the file <code class="docutils literal notranslate"><span class="pre">mysql-pubsub-schema-3.0.0-pre-upgrade.sql</span></code>. You need to execute statements from this file on your source database, which will drop old procedures and functions used to access database and also this statements will rename old tables by adding suffix _1 to each of old tables. Example:</p>
<dl class="simple">
<dt><strong>MySQL</strong></dt><dd><p><code class="docutils literal notranslate"><span class="pre">mysql</span> <span class="pre">-u</span> <span class="pre">tigase</span> <span class="pre">-p</span> <span class="pre">tigase_pubsub</span> <span class="pre">&lt;</span> <span class="pre">database/mysql-pubsub-schema-3.0.0-pre-upgrade.sql</span></code></p>
</dd>
<dt><strong>MS SQL</strong></dt><dd><p><code class="docutils literal notranslate"><span class="pre">sqlcmd</span> <span class="pre">-S</span> <span class="pre">%servername%</span> <span class="pre">-U</span> <span class="pre">%root_user%</span> <span class="pre">-P</span> <span class="pre">%root_pass%</span> <span class="pre">-d</span> <span class="pre">%database%</span> <span class="pre">-i</span> <span class="pre">database\sqlserver-pubsub-schema-3.0.0-pre-upgrade.sql</span></code></p>
</dd>
</dl>
<p>Update Tigase PubSub Component</p>
<p>For this you need to copy the Tigase PubSub Component jar file to jars directory inside Tigase XMPP Server installation directory. It is also recommended to copy files from database directory of Tigase PubSub Component to database directory in Tigase XMPP Server installation directory.</p>
<p>If you happen to use one of the the distribution packaged (either installer or -dist-max flavored archive) then all required files are already available - both new schema files will be available in <code class="docutils literal notranslate"><span class="pre">database/</span></code> directory as well as both versions of PubSub component will be present in <code class="docutils literal notranslate"><span class="pre">jars/</span></code> directory - PubSub3 as tigase-pubsub.jar and PubSub2 as tigase-pubsub-2.2.0.jar.old (provided for compatibility reasons).</p>
</div>
<div class="section" id="load-new-schema">
<h4><span class="section-number">1.3.4.3. </span>Load New Schema<a class="headerlink" href="#load-new-schema" title="Stały odnośnik do tego nagłówka">¶</a></h4>
<p>In the <code class="docutils literal notranslate"><span class="pre">database</span></code> directory you will find files containing new schemas for:</p>
<ul class="simple">
<li><p>MySQL - <code class="docutils literal notranslate"><span class="pre">mysql-pubsub-schema-3.0.0.sql</span></code></p></li>
<li><p>PostgreSQL - <code class="docutils literal notranslate"><span class="pre">postgresql-pubsub-schema-3.0.0.sql</span></code></p></li>
<li><p>MSSQL - <code class="docutils literal notranslate"><span class="pre">sqlserver-pubsub-schema-3.0.0.sql</span></code></p></li>
<li><p>DerbyDB - <code class="docutils literal notranslate"><span class="pre">derby-pubsub-schema-3.0.0.sql</span></code> and <code class="docutils literal notranslate"><span class="pre">pubsub-db-create-derby.sh</span></code></p></li>
</ul>
<p>For most databases, with the exception of Derby, you only need to execute statements from the proper file. For example:</p>
<dl class="simple">
<dt><strong>MySQL</strong></dt><dd><p><code class="docutils literal notranslate"><span class="pre">mysql</span> <span class="pre">-u</span> <span class="pre">tigase</span> <span class="pre">-p</span> <span class="pre">tigase_pubsub</span> <span class="pre">&lt;</span> <span class="pre">database/mysql-pubsub-schema-3.0.0.sql</span></code></p>
</dd>
<dt><strong>MS SQL</strong></dt><dd><p><code class="docutils literal notranslate"><span class="pre">sqlcmd</span> <span class="pre">-S</span> <span class="pre">%servername%</span> <span class="pre">-U</span> <span class="pre">%root_user%</span> <span class="pre">-P</span> <span class="pre">%root_pass%</span> <span class="pre">-d</span> <span class="pre">%database%</span> <span class="pre">-i</span> <span class="pre">database\sqlserver-pubsub-schema-3.0.0.sql</span></code></p>
</dd>
<dt><strong>PostgreSQL</strong></dt><dd><p><code class="docutils literal notranslate"><span class="pre">psql</span> <span class="pre">-h</span> <span class="pre">$DB_HOST</span> <span class="pre">-q</span> <span class="pre">-U</span> <span class="pre">${USR_NAME}</span> <span class="pre">-d</span> <span class="pre">$DB_NAME</span> <span class="pre">-f</span> <span class="pre">database/sqlserver-pubsub-schema-3.0.0.sql</span></code></p>
</dd>
</dl>
<p>For DerbyDB you need to execute the <code class="docutils literal notranslate"><span class="pre">pubsub-db-create-derby.sh</span></code> script and pass proper JDBC URI to database to which you want to load schema (if database does not exist, it will be created).</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">database</span><span class="o">/</span><span class="n">pubsub</span><span class="o">-</span><span class="n">db</span><span class="o">-</span><span class="n">create</span><span class="o">-</span><span class="n">derby</span><span class="o">.</span><span class="n">sh</span>
</pre></div>
</div>
<p><strong>NOTE:</strong> It is possible to use same database which was used before - then after upgrade you will have new tables and old tables with _1 suffix.</p>
<p>Execute Migration Utility</p>
<p>In the <code class="docutils literal notranslate"><span class="pre">/database</span></code> directory you will find the <code class="docutils literal notranslate"><span class="pre">pubsub-db-migrate.sh</span></code> file which you need to execute and pass arguments with JDBC URIs needed to connect to source and destination database. If you used dedicated tables for PubSub you will also need to pass a class name used to access database (value of <code class="docutils literal notranslate"><span class="pre">pubsub-repo-class</span></code> variable from <code class="docutils literal notranslate"><span class="pre">etc/config.tdsl</span></code> file).</p>
<p>Example for dedicated table used for PubSub:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">database</span><span class="o">/</span><span class="n">pubsub</span><span class="o">-</span><span class="n">db</span><span class="o">-</span><span class="n">migrate</span><span class="p">.</span><span class="n">sh</span> <span class="o">-</span><span class="k">in</span><span class="o">-</span><span class="n">repo</span><span class="o">-</span><span class="k">class</span> <span class="n">tigase</span><span class="p">.</span><span class="n">pubsub</span><span class="p">.</span><span class="n">repository</span><span class="p">.</span><span class="n">PubSubDAO</span>
<span class="o">-</span><span class="k">in</span> <span class="s1">&#39;jdbc:mysql://localhost/tigase_pubsub?user=tigase&amp;password=passwd&#39;</span>
<span class="o">-</span><span class="k">out</span> <span class="s1">&#39;jdbc:mysql://localhost/tigase_pubsub?user=tigase&amp;password=passwd&#39;</span>
</pre></div>
</div>
<p>Example for use without dedicated PubSub tables:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">database</span><span class="o">/</span><span class="n">pubsub</span><span class="o">-</span><span class="n">db</span><span class="o">-</span><span class="n">migrate</span><span class="p">.</span><span class="n">sh</span>
<span class="o">-</span><span class="k">in</span> <span class="s1">&#39;jdbc:mysql://localhost/tigase?user=tigase&amp;password=passwd&#39;</span>
<span class="o">-</span><span class="k">out</span> <span class="s1">&#39;jdbc:mysql://localhost/tigase?user=tigase&amp;password=passwd&#39;</span>
</pre></div>
</div>
<p>Example for use with dedicated tables in a Windows environment:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">database</span><span class="o">/</span><span class="n">pubsub</span><span class="o">-</span><span class="n">db</span><span class="o">-</span><span class="n">migrate</span><span class="p">.</span><span class="n">cmd</span> <span class="o">-</span><span class="k">in</span><span class="o">-</span><span class="n">repo</span><span class="o">-</span><span class="k">class</span> <span class="n">tigase</span><span class="p">.</span><span class="n">pubsub</span><span class="p">.</span><span class="n">repository</span><span class="p">.</span><span class="n">PubSubDAO</span>
<span class="o">-</span><span class="k">in</span> <span class="s1">&#39;jdbc:sqlserver://&lt;hostname&gt;\\&lt;instance&gt;:&lt;port&gt;;databaseName=&lt;name&gt;;user=tigase;password=tigase;schema=dbo;lastUpdateCount=false&#39;</span>
<span class="o">-</span><span class="k">out</span> <span class="s1">&#39;jdbc:sqlserver://&lt;hostname&gt;\\&lt;instance&gt;:&lt;port&gt;;databaseName=&lt;name&gt;;user=tigase;password=tigase;schema=dbo;lastUpdateCount=false&#39;</span>
</pre></div>
</div>
<p>During execution this utility will report information about migration of PubSub data to the new schema, and the same information will be store in <code class="docutils literal notranslate"><span class="pre">pubsub_db_migration.log</span></code>.</p>
<p>Finish</p>
<p>After successful migration you will have all data copied to new tables. Old tables will be renamed by adding suffix _1. After verification that everything works OK, you can delete old tables and it’s content as it want be used any more.</p>
</div>
</div>
</div>
<div class="section" id="features">
<h2><span class="section-number">1.4. </span>Features<a class="headerlink" href="#features" title="Stały odnośnik do tego nagłówka">¶</a></h2>
</div>
<div class="section" id="adhoc-commands">
<h2><span class="section-number">1.5. </span>AdHoc Commands<a class="headerlink" href="#adhoc-commands" title="Stały odnośnik do tego nagłówka">¶</a></h2>
<p>Similar to the HTTP API, AdHoc commands based on groovy scripts can be sent to this component to do a number of tasks. All scripts for these Ad-hoc commands are found at <code class="docutils literal notranslate"><span class="pre">sec/main/groovy/tigase/admin</span></code> in source distributions, or at <a class="reference external" href="https://projects.tigase.org/projects/tigase-pubsub/repository/revisions/master/show/src/main/groovy/tigase/admin">this link</a>. To use them, the scripts need to be copied into the <code class="docutils literal notranslate"><span class="pre">scripts/admin/pubsub</span></code> folder in the Tigase installation directory. For all examples, the component address will be <code class="docutils literal notranslate"><span class="pre">pubsub.example.com</span></code>.</p>
<div class="section" id="create-a-node">
<h3><span class="section-number">1.5.1. </span>Create a Node<a class="headerlink" href="#create-a-node" title="Stały odnośnik do tego nagłówka">¶</a></h3>
<p>Ad-hoc command node: <code class="docutils literal notranslate"><span class="pre">create-node</span></code> Required role: Service Administrator</p>
<p>Command requires fields <code class="docutils literal notranslate"><span class="pre">node</span></code> and <code class="docutils literal notranslate"><span class="pre">pubsub#node_type</span></code> to be filled with proper values for execution. - <code class="docutils literal notranslate"><span class="pre">node</span></code> Field containing id of node to create. - <code class="docutils literal notranslate"><span class="pre">pubsub#node_type</span></code> Contains one of two possible values. * <code class="docutils literal notranslate"><span class="pre">leaf-node</span></code> Node that will be published. * <code class="docutils literal notranslate"><span class="pre">collection</span></code> Node that will contain other nodes.</p>
<p>Other fields are optional fields that can be set to change configuration of newly create node to different configuration than default.</p>
<p>Example call using TCLMT:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">bin</span><span class="o">/</span><span class="n">tclmt</span><span class="o">.</span><span class="n">sh</span> <span class="o">-</span><span class="n">u</span> <span class="n">admin</span><span class="nd">@example</span><span class="o">.</span><span class="n">com</span> <span class="o">-</span><span class="n">p</span> <span class="n">admin123</span> <span class="n">remote</span> <span class="n">pubsub</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span> <span class="n">create</span><span class="o">-</span><span class="n">node</span> <span class="n">example</span> <span class="n">admin</span><span class="nd">@example</span><span class="o">.</span><span class="n">com</span> <span class="n">leaf</span>
</pre></div>
</div>
</div>
<div class="section" id="delete-a-node">
<h3><span class="section-number">1.5.2. </span>Delete a Node<a class="headerlink" href="#delete-a-node" title="Stały odnośnik do tego nagłówka">¶</a></h3>
<p>Ad-hoc command node: <code class="docutils literal notranslate"><span class="pre">delete-node</span></code> Required role: Service Administrator</p>
<p>Command requires <code class="docutils literal notranslate"><span class="pre">node</span></code> field to be filled. - <code class="docutils literal notranslate"><span class="pre">node</span></code> Field containing id of node to delete.</p>
<p>Example call using TCLMT:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">bin</span><span class="o">/</span><span class="n">tclmt</span><span class="o">.</span><span class="n">sh</span> <span class="o">-</span><span class="n">u</span> <span class="n">admin</span><span class="nd">@example</span><span class="o">.</span><span class="n">com</span> <span class="o">-</span><span class="n">p</span> <span class="n">admin123</span> <span class="n">remote</span> <span class="n">pubsub</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span> <span class="n">delete</span><span class="o">-</span><span class="n">node</span> <span class="n">example</span>
</pre></div>
</div>
</div>
<div class="section" id="subscribe-to-a-node">
<h3><span class="section-number">1.5.3. </span>Subscribe to a Node<a class="headerlink" href="#subscribe-to-a-node" title="Stały odnośnik do tego nagłówka">¶</a></h3>
<p>Ad-hoc command node: <code class="docutils literal notranslate"><span class="pre">subscribe-node</span></code> Required role: Service Administrator</p>
<p>Command requires <code class="docutils literal notranslate"><span class="pre">node</span></code> and <code class="docutils literal notranslate"><span class="pre">jids</span></code> nodes to be filled. - <code class="docutils literal notranslate"><span class="pre">node</span></code> Field containing node to subscribe to. - <code class="docutils literal notranslate"><span class="pre">jids</span></code> Field containing list of JIDs to subscribe to the node.</p>
<p>Example call using TCLMT:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">bin</span><span class="o">/</span><span class="n">tclmt</span><span class="o">.</span><span class="n">sh</span> <span class="o">-</span><span class="n">u</span> <span class="n">admin</span><span class="nd">@example</span><span class="o">.</span><span class="n">com</span> <span class="o">-</span><span class="n">p</span> <span class="n">admin123</span> <span class="n">remote</span> <span class="n">pubsub</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span> <span class="n">subscribe</span><span class="o">-</span><span class="n">node</span> <span class="n">example</span> <span class="n">admin</span><span class="nd">@example</span><span class="o">.</span><span class="n">com</span><span class="p">,</span><span class="n">test1</span><span class="nd">@example</span><span class="o">.</span><span class="n">com</span>
</pre></div>
</div>
</div>
<div class="section" id="unsubscribe-to-a-node">
<h3><span class="section-number">1.5.4. </span>Unsubscribe to a Node<a class="headerlink" href="#unsubscribe-to-a-node" title="Stały odnośnik do tego nagłówka">¶</a></h3>
<p>Ad-hoc command node: <code class="docutils literal notranslate"><span class="pre">unsubscribe-node</span></code> Required role: Service Administrator</p>
<p>Command requires <code class="docutils literal notranslate"><span class="pre">node</span></code> and <code class="docutils literal notranslate"><span class="pre">jids</span></code> nodes to be filled. - <code class="docutils literal notranslate"><span class="pre">node</span></code> Field containing node to unsubscribe to. - <code class="docutils literal notranslate"><span class="pre">jids</span></code> Field containing list of JIDs to unsubscribe to the node.</p>
<p>Example call using TCLMT:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">bin</span><span class="o">/</span><span class="n">tclmt</span><span class="o">.</span><span class="n">sh</span> <span class="o">-</span><span class="n">u</span> <span class="n">admin</span><span class="nd">@example</span><span class="o">.</span><span class="n">com</span> <span class="o">-</span><span class="n">p</span> <span class="n">admin123</span> <span class="n">remote</span> <span class="n">pubsub</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span> <span class="n">unsubscribe</span><span class="o">-</span><span class="n">node</span> <span class="n">example</span> <span class="n">admin</span><span class="nd">@example</span><span class="o">.</span><span class="n">com</span><span class="p">,</span><span class="n">test2</span><span class="nd">@example</span><span class="o">.</span><span class="n">com</span>
</pre></div>
</div>
</div>
<div class="section" id="publish-an-item-to-a-node">
<h3><span class="section-number">1.5.5. </span>Publish an item to a Node<a class="headerlink" href="#publish-an-item-to-a-node" title="Stały odnośnik do tego nagłówka">¶</a></h3>
<p>Ad-hoc command node: <code class="docutils literal notranslate"><span class="pre">publish-item</span></code> Required role: Service Administrator</p>
<p>Command requires fields <code class="docutils literal notranslate"><span class="pre">node</span></code> and <code class="docutils literal notranslate"><span class="pre">entry</span></code> to be filled. - <code class="docutils literal notranslate"><span class="pre">node</span></code> Field containing id of node to publish to. - <code class="docutils literal notranslate"><span class="pre">item-id</span></code> Field may contain id of entry to publish, can be empty. - <code class="docutils literal notranslate"><span class="pre">entry</span></code> Field should contain multi-line entry content that should be valid XML values for items.</p>
<p>This command due to it’s complexity cannot be easily executed by TCLMT using default remote script which provides support for basic adhoc commands. Example call using TCLMT:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">bin</span><span class="o">/</span><span class="n">tclmt</span><span class="o">.</span><span class="n">sh</span> <span class="o">-</span><span class="n">u</span> <span class="n">admin</span><span class="nd">@example</span><span class="o">.</span><span class="n">com</span> <span class="o">-</span><span class="n">p</span> <span class="n">admin123</span> <span class="n">remote</span> <span class="n">pubsub</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span> <span class="n">publish</span><span class="o">-</span><span class="n">item</span> <span class="n">example</span> <span class="n">item</span><span class="o">-</span><span class="mi">1</span> <span class="s1">&#39;&lt;entry&gt;&lt;title&gt;Example 1&lt;/title&gt;&lt;/entry&gt;&#39;</span>
</pre></div>
</div>
<p>Example Groovy script to execute create-node command using JAXMPP2</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">tigase.jaxmpp.j2se.Jaxmpp</span>
<span class="kn">import</span> <span class="nn">tigase.jaxmpp.core.client.AsyncCallback</span>
<span class="kn">import</span> <span class="nn">tigase.jaxmpp.core.client.exceptions.JaxmppException</span>
<span class="kn">import</span> <span class="nn">tigase.jaxmpp.core.client.xmpp.stanzas.Stanza</span>
<span class="kn">import</span> <span class="nn">tigase.jaxmpp.core.client.SessionObject</span>
<span class="kn">import</span> <span class="nn">tigase.jaxmpp.j2se.ConnectionConfiguration</span>
<span class="kn">import</span> <span class="nn">tigase.jaxmpp.core.client.xml.Element</span>
<span class="kn">import</span> <span class="nn">tigase.jaxmpp.core.client.xml.DefaultElement</span>
<span class="kn">import</span> <span class="nn">tigase.jaxmpp.core.client.xmpp.forms.JabberDataElement</span>

<span class="n">Jaxmpp</span> <span class="n">jaxmpp</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Jaxmpp</span><span class="p">();</span>

<span class="n">jaxmpp</span><span class="p">.</span><span class="na">with</span> <span class="p">{</span>
    <span class="n">getConnectionConfiguration</span><span class="p">().</span><span class="na">setConnectionType</span><span class="p">(</span><span class="n">ConnectionConfiguration</span><span class="p">.</span><span class="na">ConnectionType</span><span class="p">.</span><span class="na">socket</span><span class="p">)</span>
    <span class="n">getConnectionConfiguration</span><span class="p">().</span><span class="na">setUserJID</span><span class="p">(</span><span class="s">&quot;admin@example.com&quot;</span><span class="p">)</span>
    <span class="n">getConnectionConfiguration</span><span class="p">().</span><span class="na">setUserPassword</span><span class="p">(</span><span class="s">&quot;admin123&quot;</span><span class="p">)</span>
<span class="p">}</span>

<span class="n">jaxmpp</span><span class="p">.</span><span class="na">login</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>

<span class="n">def</span> <span class="n">packet</span> <span class="o">=</span> <span class="n">IQ</span><span class="p">.</span><span class="na">create</span><span class="p">();</span>
<span class="n">packet</span><span class="p">.</span><span class="na">setAttribute</span><span class="p">(</span><span class="s">&quot;to&quot;</span><span class="p">,</span> <span class="s">&quot;pubsub.example.com&quot;</span><span class="p">);</span>

<span class="n">Element</span> <span class="n">command</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DefaultElement</span><span class="p">(</span><span class="s">&quot;command&quot;</span><span class="p">);</span>
<span class="n">command</span><span class="p">.</span><span class="na">setXMLNS</span><span class="p">(</span><span class="s">&quot;http://jabber.org/protocol/commands&quot;</span><span class="p">);</span>
<span class="n">command</span><span class="p">.</span><span class="na">setAttribute</span><span class="p">(</span><span class="s">&quot;node&quot;</span><span class="p">,</span> <span class="s">&quot;create-node&quot;</span><span class="p">);</span>
<span class="n">packet</span><span class="p">.</span><span class="na">addChild</span><span class="p">(</span><span class="n">command</span><span class="p">);</span>

<span class="n">Element</span> <span class="n">x</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DefaultElement</span><span class="p">(</span><span class="s">&quot;x&quot;</span><span class="p">);</span>
<span class="n">x</span><span class="p">.</span><span class="na">setXMLNS</span><span class="p">(</span><span class="s">&quot;jabber:x:data&quot;</span><span class="p">);</span>

<span class="n">command</span><span class="p">.</span><span class="na">addChild</span><span class="p">(</span><span class="n">x</span><span class="p">);</span>

<span class="n">def</span> <span class="n">data</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JabberDataElement</span><span class="p">(</span><span class="n">x</span><span class="p">);</span>
<span class="n">data</span><span class="p">.</span><span class="na">addTextSingleField</span><span class="p">(</span><span class="s">&quot;node&quot;</span><span class="p">,</span> <span class="s">&quot;example&quot;</span><span class="p">);</span>
<span class="n">data</span><span class="p">.</span><span class="na">addListSingleField</span><span class="p">(</span><span class="s">&quot;pubsub#node_type&quot;</span><span class="p">,</span> <span class="s">&quot;leaf&quot;</span><span class="p">);</span>

<span class="n">jaxmpp</span><span class="p">.</span><span class="na">send</span><span class="p">(</span><span class="n">packet</span><span class="p">,</span> <span class="k">new</span> <span class="n">AsyncCallback</span><span class="p">()</span> <span class="p">{</span>
    <span class="kt">void</span> <span class="nf">onError</span><span class="p">(</span><span class="n">Stanza</span> <span class="n">responseStanza</span><span class="p">,</span> <span class="n">tigase</span><span class="p">.</span><span class="na">jaxmpp</span><span class="p">.</span><span class="na">core</span><span class="p">.</span><span class="na">client</span><span class="p">.</span><span class="na">XMPPException</span><span class="p">.</span><span class="na">ErrorCondition</span> <span class="n">error</span><span class="p">)</span> <span class="kd">throws</span> <span class="n">JaxmppException</span> <span class="p">{</span>
        <span class="n">println</span> <span class="s">&quot;received error during processing request&quot;</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kt">void</span> <span class="nf">onSuccess</span><span class="p">(</span><span class="n">Stanza</span> <span class="n">responseStanza</span><span class="p">)</span> <span class="kd">throws</span> <span class="n">JaxmppException</span> <span class="p">{</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">responseStanza</span><span class="p">.</span><span class="na">getFirstChild</span><span class="p">(</span><span class="s">&quot;command&quot;</span><span class="p">).</span><span class="na">getFirstChid</span><span class="p">(</span><span class="s">&quot;x&quot;</span><span class="p">);</span>
        <span class="n">data</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JabberDataElement</span><span class="p">(</span><span class="n">x</span><span class="p">);</span>
        <span class="n">def</span> <span class="n">error</span> <span class="o">=</span> <span class="n">data</span><span class="p">.</span><span class="na">getField</span><span class="p">(</span><span class="s">&quot;Error&quot;</span><span class="p">);</span>
        <span class="n">println</span> <span class="s">&quot;command executed with result = &quot;</span> <span class="o">+</span> <span class="p">(</span><span class="n">error</span> <span class="o">?</span> <span class="s">&quot;failure, error = &quot;</span> <span class="o">+</span> <span class="n">error</span><span class="p">.</span><span class="na">getFieldValue</span><span class="p">()</span> <span class="p">:</span> <span class="s">&quot;success&quot;</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="kt">void</span> <span class="nf">onTimeout</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">println</span> <span class="s">&quot;command timed out&quot;</span>
    <span class="p">}</span>
<span class="p">});</span>

<span class="n">Thread</span><span class="p">.</span><span class="na">sleep</span><span class="p">(</span><span class="mi">30000</span><span class="p">);</span>
<span class="n">jaxmpp</span><span class="p">.</span><span class="na">disconnect</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="section" id="pubsub-node-presence-protocol">
<h3><span class="section-number">1.5.6. </span>PubSub Node Presence Protocol<a class="headerlink" href="#pubsub-node-presence-protocol" title="Stały odnośnik do tego nagłówka">¶</a></h3>
<p><strong>Occupant Use Case</strong></p>
<div class="section" id="log-in-to-pubsub-node">
<h4><span class="section-number">1.5.6.1. </span>Log in to Pubsub Node<a class="headerlink" href="#log-in-to-pubsub-node" title="Stały odnośnik do tego nagłówka">¶</a></h4>
<p>To log in to PubSub Node user must send presence to PubSub component with additional information about node:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;presence</span>
    <span class="na">from=</span><span class="s">&#39;hag66@shakespeare.lit/pda&#39;</span>
    <span class="na">id=</span><span class="s">&#39;n13mt3l&#39;</span>
    <span class="na">to=</span><span class="s">&#39;pubsub.shakespeare.lit&#39;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;pubsub</span> <span class="na">xmlns=</span><span class="s">&#39;tigase:pubsub:1&#39;</span> <span class="na">node=</span><span class="s">&#39;princely_musings&#39;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/presence&gt;</span>
</pre></div>
</div>
<p>Component will publish this information in node:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;message</span> <span class="na">from=</span><span class="s">&#39;pubsub.shakespeare.lit&#39;</span> <span class="na">to=</span><span class="s">&#39;francisco@denmark.lit&#39;</span> <span class="na">id=</span><span class="s">&#39;foo&#39;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;event</span> <span class="na">xmlns=</span><span class="s">&#39;http://jabber.org/protocol/pubsub#event&#39;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;items</span> <span class="na">node=</span><span class="s">&#39;princely_musings&#39;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;item&gt;</span>
        <span class="nt">&lt;presence</span> <span class="na">xmlns=</span><span class="s">&#39;tigase:pubsub:1&#39;</span> <span class="na">node=</span><span class="s">&#39;princely_musings&#39;</span> <span class="na">jid=</span><span class="s">&#39;hag66@shakespeare.lit/pda&#39;</span> <span class="na">type=</span><span class="s">&#39;available&#39;</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/item&gt;</span>
    <span class="nt">&lt;/items&gt;</span>
  <span class="nt">&lt;/event&gt;</span>
<span class="nt">&lt;/message&gt;</span>
<span class="nt">&lt;message</span> <span class="na">from=</span><span class="s">&#39;pubsub.shakespeare.lit&#39;</span> <span class="na">to=</span><span class="s">&#39;bernardo@denmark.lit&#39;</span> <span class="na">id=</span><span class="s">&#39;bar&#39;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;event</span> <span class="na">xmlns=</span><span class="s">&#39;http://jabber.org/protocol/pubsub#event&#39;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;items</span> <span class="na">node=</span><span class="s">&#39;princely_musings&#39;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;item&gt;</span>
        <span class="nt">&lt;presence</span> <span class="na">xmlns=</span><span class="s">&#39;tigase:pubsub:1&#39;</span> <span class="na">node=</span><span class="s">&#39;princely_musings&#39;</span> <span class="na">jid=</span><span class="s">&#39;hag66@shakespeare.lit/pda&#39;</span> <span class="na">type=</span><span class="s">&#39;available&#39;</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/item&gt;</span>
    <span class="nt">&lt;/items&gt;</span>
  <span class="nt">&lt;/event&gt;</span>
<span class="nt">&lt;/message&gt;</span>
</pre></div>
</div>
<p>And then will send notification with presences of all occupants to new occupant.</p>
</div>
<div class="section" id="log-out-from-pubsub-node">
<h4><span class="section-number">1.5.6.2. </span>Log out from PubSub Node<a class="headerlink" href="#log-out-from-pubsub-node" title="Stały odnośnik do tego nagłówka">¶</a></h4>
<p>To logout from single node, user must send presence stanza with type unavailable:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;presence</span>
    <span class="na">from=</span><span class="s">&#39;hag66@shakespeare.lit/pda&#39;</span>
    <span class="na">type=</span><span class="s">&#39;unavailable&#39;</span>
    <span class="na">to=</span><span class="s">&#39;pubsub.shakespeare.lit&#39;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;pubsub</span> <span class="na">xmlns=</span><span class="s">&#39;tigase:pubsub:1&#39;</span> <span class="na">node=</span><span class="s">&#39;princely_musings&#39;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/presence&gt;</span>
</pre></div>
</div>
<p>Component will send events to all occupants as described:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;message</span> <span class="na">from=</span><span class="s">&#39;pubsub.shakespeare.lit&#39;</span> <span class="na">to=</span><span class="s">&#39;francisco@denmark.lit&#39;</span> <span class="na">id=</span><span class="s">&#39;foo&#39;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;event</span> <span class="na">xmlns=</span><span class="s">&#39;http://jabber.org/protocol/pubsub#event&#39;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;items</span> <span class="na">node=</span><span class="s">&#39;princely_musings&#39;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;item&gt;</span>
        <span class="nt">&lt;presence</span> <span class="na">xmlns=</span><span class="s">&#39;tigase:pubsub:1&#39;</span> <span class="na">node=</span><span class="s">&#39;princely_musings&#39;</span> <span class="na">jid=</span><span class="s">&#39;hag66@shakespeare.lit/pda&#39;</span> <span class="na">type=</span><span class="s">&#39;unavailable&#39;</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/item&gt;</span>
    <span class="nt">&lt;/items&gt;</span>
  <span class="nt">&lt;/event&gt;</span>
<span class="nt">&lt;/message&gt;</span>
</pre></div>
</div>
<p>If component receives presence stanza with type unavailable without specified node, then component will log out user from all nodes he logged before and publish events.</p>
</div>
<div class="section" id="retrieving-list-of-all-node-subscribers">
<h4><span class="section-number">1.5.6.3. </span>Retrieving list of all Node Subscribers<a class="headerlink" href="#retrieving-list-of-all-node-subscribers" title="Stały odnośnik do tego nagłówka">¶</a></h4>
<p>To retrieve list of node subscribers, node configuration option <code class="docutils literal notranslate"><span class="pre">tigase#allow_view_subscribers</span></code> must be set to true:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;iq</span> <span class="na">type=</span><span class="s">&#39;set&#39;</span>
    <span class="na">from=</span><span class="s">&#39;hamlet@denmark.lit/elsinore&#39;</span>
    <span class="na">to=</span><span class="s">&#39;pubsub.shakespeare.lit&#39;</span>
    <span class="na">id=</span><span class="s">&#39;config2&#39;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;pubsub</span> <span class="na">xmlns=</span><span class="s">&#39;http://jabber.org/protocol/pubsub#owner&#39;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;configure</span> <span class="na">node=</span><span class="s">&#39;princely_musings&#39;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;x</span> <span class="na">xmlns=</span><span class="s">&#39;jabber:x:data&#39;</span> <span class="na">type=</span><span class="s">&#39;submit&#39;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;field</span> <span class="na">var=</span><span class="s">&#39;FORM_TYPE&#39;</span> <span class="na">type=</span><span class="s">&#39;hidden&#39;</span><span class="nt">&gt;</span>
          <span class="nt">&lt;value&gt;</span>http://jabber.org/protocol/pubsub#node_config<span class="nt">&lt;/value&gt;</span>
        <span class="nt">&lt;/field&gt;</span>
        <span class="nt">&lt;field</span> <span class="na">var=</span><span class="s">&#39;tigase#allow_view_subscribers&#39;</span><span class="nt">&gt;&lt;value&gt;</span>1<span class="nt">&lt;/value&gt;&lt;/field&gt;</span>
      <span class="nt">&lt;/x&gt;</span>
    <span class="nt">&lt;/configure&gt;</span>
  <span class="nt">&lt;/pubsub&gt;</span>
<span class="nt">&lt;/iq&gt;</span>
</pre></div>
</div>
<p>When option is enabled, each subscriber may get list of subscribers the same way <a class="reference external" href="http://xmpp.org/extensions/xep-0060.html#owner-subscriptions-retrieve">as owner</a>.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;iq</span> <span class="na">type=</span><span class="s">&#39;get&#39;</span>
    <span class="na">from=</span><span class="s">&#39;hamlet@denmark.lit/elsinore&#39;</span>
    <span class="na">to=</span><span class="s">&#39;pubsub.shakespeare.lit&#39;</span>
    <span class="na">id=</span><span class="s">&#39;subman1&#39;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;pubsub</span> <span class="na">xmlns=</span><span class="s">&#39;http://jabber.org/protocol/pubsub#owner&#39;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;subscriptions</span> <span class="na">node=</span><span class="s">&#39;princely_musings&#39;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/pubsub&gt;</span>
<span class="nt">&lt;/iq&gt;</span>
</pre></div>
</div>
<p>There is extension to filter returned list:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;iq</span> <span class="na">type=</span><span class="s">&#39;get&#39;</span>
    <span class="na">from=</span><span class="s">&#39;hamlet@denmark.lit/elsinore&#39;</span>
    <span class="na">to=</span><span class="s">&#39;pubsub.shakespeare.lit&#39;</span>
    <span class="na">id=</span><span class="s">&#39;subman1&#39;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;pubsub</span> <span class="na">xmlns=</span><span class="s">&#39;http://jabber.org/protocol/pubsub#owner&#39;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;subscriptions</span> <span class="na">node=</span><span class="s">&#39;princely_musings&#39;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;filter</span> <span class="na">xmlns=</span><span class="s">&#39;tigase:pubsub:1&#39;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;jid</span> <span class="na">contains=</span><span class="s">&#39;@denmark.lit&#39;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/filter&gt;</span>
    <span class="nt">&lt;/subscriptions&gt;</span>
  <span class="nt">&lt;/pubsub&gt;</span>
<span class="nt">&lt;/iq&gt;</span>
</pre></div>
</div>
<p>In this example will be returned all subscriptions of users from domain „denmark.lit”.</p>
</div>
<div class="section" id="offline-message-sink">
<h4><span class="section-number">1.5.6.4. </span>Offline Message Sink<a class="headerlink" href="#offline-message-sink" title="Stały odnośnik do tego nagłówka">¶</a></h4>
<p>Messages sent to offline users is published in pubsub node, from where that message is sent to all the node subscribers as a pubsub notification.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;message</span> <span class="na">from=</span><span class="s">&#39;pubsub.coffeebean.local&#39;</span> <span class="na">to=</span><span class="s">&#39;bard@shakespeare.lit&#39;</span> <span class="na">id=</span><span class="s">&#39;foo&#39;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;event</span> <span class="na">xmlns=</span><span class="s">&#39;http://jabber.org/protocol/pubsub#event&#39;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;items</span> <span class="na">node=</span><span class="s">&#39;message_sink&#39;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;item</span> <span class="na">id=</span><span class="s">&#39;ae890ac52d0df67ed7cfdf51b644e901&#39;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;message</span> <span class="na">type=</span><span class="s">&quot;chat&quot;</span> <span class="na">xmlns=</span><span class="s">&quot;jabber:client&quot;</span> <span class="na">id=</span><span class="s">&quot;x2ps6u0004&quot;</span>
          <span class="na">to=</span><span class="s">&quot;userB_h6x1bt0002@coffeebean.local&quot;</span>
          <span class="na">from=</span><span class="s">&quot;userA_uyhx8p0001@coffeebean.local/1149352695-tigase-20&quot;</span><span class="nt">&gt;</span>
          <span class="nt">&lt;body&gt;</span>Hello<span class="nt">&lt;/body&gt;</span>
        <span class="nt">&lt;/message&gt;</span>
      <span class="nt">&lt;/item&gt;</span>
    <span class="nt">&lt;/items&gt;</span>
  <span class="nt">&lt;/event&gt;</span>
<span class="nt">&lt;/message&gt;</span>
</pre></div>
</div>
<div class="section" id="id2">
<h5><span class="section-number">1.5.6.4.1. </span>Configuration<a class="headerlink" href="#id2" title="Stały odnośnik do tego nagłówka">¶</a></h5>
<p>The pubsub node must be created and configured beforehand:</p>
<p><strong>Create node</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">iq</span> <span class="nb">type</span><span class="o">=</span><span class="s1">&#39;set&#39;</span>
    <span class="n">to</span><span class="o">=</span><span class="s1">&#39;pubsub.coffeebean.local&#39;</span>
    <span class="nb">id</span><span class="o">=</span><span class="s1">&#39;create1&#39;</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">pubsub</span> <span class="n">xmlns</span><span class="o">=</span><span class="s1">&#39;http://jabber.org/protocol/pubsub&#39;</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">create</span> <span class="n">node</span><span class="o">=</span><span class="s1">&#39;message_sink&#39;</span><span class="o">/&gt;</span>
  <span class="o">&lt;/</span><span class="n">pubsub</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">iq</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>After that is done, you need to add SessionManager as a publisher:</p>
<p><strong>Add sess-man as publisher</strong></p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;iq</span> <span class="na">type=</span><span class="s">&#39;set&#39;</span>
    <span class="na">to=</span><span class="s">&#39;pubsub.coffeebean.local&#39;</span>
    <span class="na">id=</span><span class="s">&#39;ent2&#39;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;pubsub</span> <span class="na">xmlns=</span><span class="s">&#39;http://jabber.org/protocol/pubsub#owner&#39;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;affiliations</span> <span class="na">node=</span><span class="s">&#39;message_sink&#39;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;affiliation</span> <span class="na">jid=</span><span class="s">&#39;sess-man@coffeebean.local&#39;</span> <span class="na">affiliation=</span><span class="s">&#39;publisher&#39;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/affiliations&gt;</span>
  <span class="nt">&lt;/pubsub&gt;</span>
<span class="nt">&lt;/iq&gt;</span>
</pre></div>
</div>
<p>Finally, the «msgoffline» offline messages processor must be configured as well</p>
<p><strong>config.tdsl configuration</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sess</span><span class="o">-</span><span class="n">man</span> <span class="p">{</span>
    <span class="n">msgoffline</span> <span class="p">()</span> <span class="p">{</span>
        <span class="n">msg</span><span class="o">-</span><span class="n">pubsub</span><span class="o">-</span><span class="n">jid</span> <span class="o">=</span> <span class="s1">&#39;pubsub.coffeebean.local&#39;</span>
        <span class="n">msg</span><span class="o">-</span><span class="n">pubsub</span><span class="o">-</span><span class="n">node</span> <span class="o">=</span> <span class="s1">&#39;message_sink&#39;</span>
        <span class="n">msg</span><span class="o">-</span><span class="n">pubsub</span><span class="o">-</span><span class="n">publisher</span> <span class="o">=</span> <span class="s1">&#39;sess-man@coffeebean.local&#39;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>Usage</strong></p>
<p>Because these sinks use a standard pubsub component, administration of the sink node is identical to any other pubsub node. <a class="reference external" href="http://www.xmpp.org/extensions/xep-0060">XEP-0060</a> defines standard pubsub usage and management.</p>
<p><strong>Managing Subscriptions</strong></p>
<p>Add new Subscriber</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;iq</span> <span class="na">type=</span><span class="s">&#39;set&#39;</span>
    <span class="na">to=</span><span class="s">&#39;pubsub.coffeebean.local&#39;</span>
    <span class="na">id=</span><span class="s">&#39;subman2&#39;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;pubsub</span> <span class="na">xmlns=</span><span class="s">&#39;http://jabber.org/protocol/pubsub#owner&#39;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;subscriptions</span> <span class="na">node=</span><span class="s">&#39;message_sink&#39;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;subscription</span> <span class="na">jid=</span><span class="s">&#39;bard@shakespeare.lit&#39;</span> <span class="na">subscription=</span><span class="s">&#39;subscribed&#39;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/subscriptions&gt;</span>
  <span class="nt">&lt;/pubsub&gt;</span>
<span class="nt">&lt;/iq&gt;</span>
</pre></div>
</div>
<p>Remove Subscriber</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;iq</span> <span class="na">type=</span><span class="s">&#39;set&#39;</span>
    <span class="na">to=</span><span class="s">&#39;pubsub.coffeebean.local&#39;</span>
    <span class="na">id=</span><span class="s">&#39;subman2&#39;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;pubsub</span> <span class="na">xmlns=</span><span class="s">&#39;http://jabber.org/protocol/pubsub#owner&#39;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;subscriptions</span> <span class="na">node=</span><span class="s">&#39;message_sink&#39;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;subscription</span> <span class="na">jid=</span><span class="s">&#39;bard@shakespeare.lit&#39;</span> <span class="na">subscription=</span><span class="s">&#39;none&#39;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/subscriptions&gt;</span>
  <span class="nt">&lt;/pubsub&gt;</span>
<span class="nt">&lt;/iq&gt;</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="rest-api">
<h2><span class="section-number">1.6. </span>REST API<a class="headerlink" href="#rest-api" title="Stały odnośnik do tego nagłówka">¶</a></h2>
<p>All example calls to pubsub REST API are prepared for pubsub component running at <code class="docutils literal notranslate"><span class="pre">pubsub.example.com</span></code>. It is required to replace this value with JID of pubsub component from your installation.</p>
<p>It is possible to provide parameters to requests as:</p>
<dl class="simple">
<dt><strong>XML</strong></dt><dd><p>All parameters passed in content of HTTP request needs to be wrapped with <code class="docutils literal notranslate"><span class="pre">&lt;data/&gt;</span></code> tag as root tag of XML document, while returned parameters will be wrapped <code class="docutils literal notranslate"><span class="pre">&lt;result/&gt;</span></code> tag as root tag of XML document.</p>
</dd>
<dt><strong>JSON</strong></dt><dd><p>Parameters must be passed as serialized JSON object. Additionally <code class="docutils literal notranslate"><span class="pre">Content-Type</span></code> header of HTTP request needs to be set to <code class="docutils literal notranslate"><span class="pre">application/json</span></code>.</p>
</dd>
</dl>
<div class="section" id="id3">
<h3><span class="section-number">1.6.1. </span>Create a node<a class="headerlink" href="#id3" title="Stały odnośnik do tego nagłówka">¶</a></h3>
<p>HTTP URI: <code class="docutils literal notranslate"><span class="pre">/rest/pubsub/pubsub.example.com/create-node</span></code></p>
<p>Available HTTP methods:</p>
<div class="section" id="get">
<h4><span class="section-number">1.6.1.1. </span>GET<a class="headerlink" href="#get" title="Stały odnośnik do tego nagłówka">¶</a></h4>
<p>Method returns example content which contains all required and optional parameters that may be passed to newly created node.</p>
</div>
<div class="section" id="post">
<h4><span class="section-number">1.6.1.2. </span>POST<a class="headerlink" href="#post" title="Stały odnośnik do tego nagłówka">¶</a></h4>
<p>Command requires fields <code class="docutils literal notranslate"><span class="pre">node</span></code> and <code class="docutils literal notranslate"><span class="pre">pubsub#node_type</span></code> to be filled with proper values for execution.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">node</span></code> - field should contain id of node to create</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">owner</span></code> - field may contains jid which should be used as jid of owner of newly created node (will use jid of Tigase HTTP API Component if not passed)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pubsub#node_type</span></code> - should contain type of node to create (two values are possible: <code class="docutils literal notranslate"><span class="pre">leaf</span></code> - node to which items will be published, <code class="docutils literal notranslate"><span class="pre">collection</span></code> - node which will contain other nodes)</p></li>
</ul>
<p>Example content to create node of id <code class="docutils literal notranslate"><span class="pre">example</span></code> and of type <code class="docutils literal notranslate"><span class="pre">leaf</span></code> and with owner set to <code class="docutils literal notranslate"><span class="pre">admin&#64;example.com</span></code>.</p>
</div>
<div class="section" id="using-xml">
<h4><span class="section-number">1.6.1.3. </span>Using XML<a class="headerlink" href="#using-xml" title="Stały odnośnik do tego nagłówka">¶</a></h4>
<p><strong>Request in XML.</strong></p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;data&gt;</span>
  <span class="nt">&lt;node&gt;</span>example<span class="nt">&lt;/node&gt;</span>
  <span class="nt">&lt;owner&gt;</span>admin@example.com<span class="nt">&lt;/owner&gt;</span>
  <span class="nt">&lt;pubsub</span> <span class="na">prefix=</span><span class="s">&quot;true&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;node_type&gt;</span>leaf<span class="nt">&lt;/node_type&gt;</span>
  <span class="nt">&lt;/pubsub&gt;</span>
<span class="nt">&lt;/data&gt;</span>
</pre></div>
</div>
<p><strong>Response in XML.</strong></p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;result&gt;</span>
  <span class="nt">&lt;Note</span> <span class="na">type=</span><span class="s">&quot;fixed&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;value&gt;</span>Operation successful<span class="nt">&lt;/value&gt;</span>
  <span class="nt">&lt;/Note&gt;</span>
<span class="nt">&lt;/result&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="using-json">
<h4><span class="section-number">1.6.1.4. </span>Using JSON<a class="headerlink" href="#using-json" title="Stały odnośnik do tego nagłówka">¶</a></h4>
<p><strong>Request in JSON.</strong></p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;node&quot;</span> <span class="p">:</span> <span class="s2">&quot;example&quot;</span><span class="p">,</span>
  <span class="nt">&quot;owner&quot;</span> <span class="p">:</span> <span class="s2">&quot;admin@example.com&quot;</span><span class="p">,</span>
  <span class="nt">&quot;pubsub#node_type&quot;</span> <span class="p">:</span> <span class="s2">&quot;leaf&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>Response in JSON.</strong></p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;Note&quot;</span><span class="p">:</span> <span class="s2">&quot;Operation successful&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="id4">
<h3><span class="section-number">1.6.2. </span>Delete a node<a class="headerlink" href="#id4" title="Stały odnośnik do tego nagłówka">¶</a></h3>
<p>HTTP URI: <code class="docutils literal notranslate"><span class="pre">/rest/pubsub/pubsub.example.com/delete-node</span></code></p>
<p>Available HTTP methods:</p>
<div class="section" id="id5">
<h4><span class="section-number">1.6.2.1. </span>GET<a class="headerlink" href="#id5" title="Stały odnośnik do tego nagłówka">¶</a></h4>
<p>Method returns example content which contains all required and optional parameters that may be passed.</p>
</div>
<div class="section" id="id6">
<h4><span class="section-number">1.6.2.2. </span>POST<a class="headerlink" href="#id6" title="Stały odnośnik do tego nagłówka">¶</a></h4>
<p>Command requires field <code class="docutils literal notranslate"><span class="pre">node</span></code> to be filled.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">node</span></code> - field should contain id of node to delete</p></li>
</ul>
<p>Example content to delete node with id <code class="docutils literal notranslate"><span class="pre">example</span></code></p>
<div class="section" id="id7">
<h5><span class="section-number">1.6.2.2.1. </span>Using XML<a class="headerlink" href="#id7" title="Stały odnośnik do tego nagłówka">¶</a></h5>
<p><strong>Request in XML.</strong></p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;data&gt;</span>
  <span class="nt">&lt;node&gt;</span>example<span class="nt">&lt;/node&gt;</span>
<span class="nt">&lt;/data&gt;</span>
</pre></div>
</div>
<p><strong>Response in XML.</strong></p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;result&gt;</span>
  <span class="nt">&lt;Note</span> <span class="na">type=</span><span class="s">&quot;fixed&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;value&gt;</span>Operation successful<span class="nt">&lt;/value&gt;</span>
  <span class="nt">&lt;/Note&gt;</span>
<span class="nt">&lt;/result&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="id8">
<h5><span class="section-number">1.6.2.2.2. </span>Using JSON<a class="headerlink" href="#id8" title="Stały odnośnik do tego nagłówka">¶</a></h5>
<p><strong>Request in JSON.</strong></p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;node&quot;</span> <span class="p">:</span> <span class="s2">&quot;example&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>Response in JSON.</strong></p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;Note&quot;</span> <span class="p">:</span> <span class="s2">&quot;Operation successful&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="id9">
<h3><span class="section-number">1.6.3. </span>Subscribe to a node<a class="headerlink" href="#id9" title="Stały odnośnik do tego nagłówka">¶</a></h3>
<p>HTTP URI: <code class="docutils literal notranslate"><span class="pre">/rest/pubsub/pubsub.example.com/subscribe-node</span></code></p>
<p>Available HTTP methods:</p>
<div class="section" id="id10">
<h4><span class="section-number">1.6.3.1. </span>GET<a class="headerlink" href="#id10" title="Stały odnośnik do tego nagłówka">¶</a></h4>
<p>Method returns example content which contains all required and optional parameters that may be passed.</p>
</div>
<div class="section" id="id11">
<h4><span class="section-number">1.6.3.2. </span>POST<a class="headerlink" href="#id11" title="Stały odnośnik do tego nagłówka">¶</a></h4>
<p>Command requires fields <code class="docutils literal notranslate"><span class="pre">node</span></code> and <code class="docutils literal notranslate"><span class="pre">jids</span></code> to be filled.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">node</span></code> - field should contain id of node to subscribe to</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">jids</span></code> - field should contain list of jids to be subscribed to node</p></li>
</ul>
<p>Example content to subscribe to node with id <code class="docutils literal notranslate"><span class="pre">example</span></code> users with jid <code class="docutils literal notranslate"><span class="pre">test1&#64;example.com</span></code> and <code class="docutils literal notranslate"><span class="pre">test2&#64;example.com</span></code></p>
<div class="section" id="id12">
<h5><span class="section-number">1.6.3.2.1. </span>Using XML<a class="headerlink" href="#id12" title="Stały odnośnik do tego nagłówka">¶</a></h5>
<p><strong>Request in XML.</strong></p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;data&gt;</span>
  <span class="nt">&lt;node&gt;</span>example<span class="nt">&lt;/node&gt;</span>
  <span class="nt">&lt;jids&gt;</span>
    <span class="nt">&lt;value&gt;</span>test1@example.com<span class="nt">&lt;/value&gt;</span>
    <span class="nt">&lt;value&gt;</span>test2@example.com<span class="nt">&lt;/value&gt;</span>
  <span class="nt">&lt;/jids&gt;</span>
<span class="nt">&lt;/data&gt;</span>
</pre></div>
</div>
<p><strong>Response in XML.</strong></p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;result&gt;</span>
  <span class="nt">&lt;Note</span> <span class="na">type=</span><span class="s">&quot;fixed&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;value&gt;</span>Operation successful<span class="nt">&lt;/value&gt;</span>
  <span class="nt">&lt;/Note&gt;</span>
<span class="nt">&lt;/result&gt;</span>
</pre></div>
</div>
<p>Using JSON</p>
<p><strong>Request in JSON.</strong></p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;node&quot;</span> <span class="p">:</span> <span class="s2">&quot;example&quot;</span><span class="p">,</span>
  <span class="nt">&quot;jids&quot;</span> <span class="p">:</span> <span class="p">[</span>
    <span class="s2">&quot;test1@example.com&quot;</span><span class="p">,</span>
    <span class="s2">&quot;test2@example.com&quot;</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>Response in JSON.</strong></p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;Note&quot;</span> <span class="p">:</span> <span class="s2">&quot;Operation successful&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="unsubscribe-from-a-node">
<h3><span class="section-number">1.6.4. </span>Unsubscribe from a node<a class="headerlink" href="#unsubscribe-from-a-node" title="Stały odnośnik do tego nagłówka">¶</a></h3>
<p>HTTP URI: <code class="docutils literal notranslate"><span class="pre">/rest/pubsub/pubsub.example.com/unsubscribe-node</span></code></p>
<p>Available HTTP methods:</p>
<div class="section" id="id13">
<h4><span class="section-number">1.6.4.1. </span>GET<a class="headerlink" href="#id13" title="Stały odnośnik do tego nagłówka">¶</a></h4>
<p>Method returns example content which contains all required and optional parameters that may be passed.</p>
</div>
<div class="section" id="id14">
<h4><span class="section-number">1.6.4.2. </span>POST<a class="headerlink" href="#id14" title="Stały odnośnik do tego nagłówka">¶</a></h4>
<p>Command requires fields <code class="docutils literal notranslate"><span class="pre">node</span></code> and <code class="docutils literal notranslate"><span class="pre">jids</span></code> to be filled.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">node</span></code> - field should contain id of node to unsubscribe from</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">jids</span></code> - field should contain list of jids to be unsubscribed from node</p></li>
</ul>
<p>Example content to unsubscribe from node with id <code class="docutils literal notranslate"><span class="pre">example</span></code> users <code class="docutils literal notranslate"><span class="pre">test1&#64;example.com</span></code> and <code class="docutils literal notranslate"><span class="pre">test2&#64;example.com</span></code></p>
</div>
<div class="section" id="id15">
<h4><span class="section-number">1.6.4.3. </span>Using XML<a class="headerlink" href="#id15" title="Stały odnośnik do tego nagłówka">¶</a></h4>
<p><strong>Request in XML.</strong></p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;data&gt;</span>
  <span class="nt">&lt;node&gt;</span>example<span class="nt">&lt;/node&gt;</span>
  <span class="nt">&lt;jids&gt;</span>
    <span class="nt">&lt;value&gt;</span>test@example.com<span class="nt">&lt;/value&gt;</span>
    <span class="nt">&lt;value&gt;</span>test2@example.com<span class="nt">&lt;/value&gt;</span>
  <span class="nt">&lt;/jids&gt;</span>
<span class="nt">&lt;/data&gt;</span>
</pre></div>
</div>
<p><strong>Response in XML.</strong></p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;result&gt;</span>
  <span class="nt">&lt;Note</span> <span class="na">type=</span><span class="s">&quot;fixed&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;value&gt;</span>Operation successful<span class="nt">&lt;/value&gt;</span>
  <span class="nt">&lt;/Note&gt;</span>
<span class="nt">&lt;/result&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="id16">
<h4><span class="section-number">1.6.4.4. </span>Using JSON<a class="headerlink" href="#id16" title="Stały odnośnik do tego nagłówka">¶</a></h4>
<p><strong>Request in JSON.</strong></p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;node&quot;</span> <span class="p">:</span> <span class="s2">&quot;example.com&quot;</span><span class="p">,</span>
  <span class="nt">&quot;jids&quot;</span> <span class="p">:</span> <span class="p">[</span>
    <span class="s2">&quot;test@example.com&quot;</span><span class="p">,</span>
    <span class="s2">&quot;test2@example.com&quot;</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>Response in JSON.</strong></p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;Note&quot;</span> <span class="p">:</span> <span class="s2">&quot;Operation successful&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="id17">
<h3><span class="section-number">1.6.5. </span>Publish an item to a node<a class="headerlink" href="#id17" title="Stały odnośnik do tego nagłówka">¶</a></h3>
<p>HTTP URI: <code class="docutils literal notranslate"><span class="pre">/rest/pubsub/pubsub.example.com/publish-item</span></code></p>
<p>Available HTTP methods:</p>
<div class="section" id="id18">
<h4><span class="section-number">1.6.5.1. </span>GET<a class="headerlink" href="#id18" title="Stały odnośnik do tego nagłówka">¶</a></h4>
<p>Method returns example content which contains all required and optional parameters that may be passed.</p>
</div>
<div class="section" id="id19">
<h4><span class="section-number">1.6.5.2. </span>POST<a class="headerlink" href="#id19" title="Stały odnośnik do tego nagłówka">¶</a></h4>
<p>Command requires fields <code class="docutils literal notranslate"><span class="pre">node</span></code> and <code class="docutils literal notranslate"><span class="pre">entry</span></code> to be filled</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">node</span></code> - field should contain id of node to publish to</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">item-id</span></code> - field may contain id of entry to publish</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">expire-at</span></code> - field may contain timestamp (in <a class="reference external" href="http://xmpp.org/extensions/xep-0082.html">XEP-0082</a> format) after which item should not be delivered to user</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">entry</span></code> - field should contain multi-line entry content which should be valid XML value for an item</p></li>
</ul>
<p>Example content to publish item with id <code class="docutils literal notranslate"><span class="pre">item-1</span></code> to node with id <code class="docutils literal notranslate"><span class="pre">example</span></code> and with content in example field. P</p>
<div class="section" id="id20">
<h5><span class="section-number">1.6.5.2.1. </span>Using XML<a class="headerlink" href="#id20" title="Stały odnośnik do tego nagłówka">¶</a></h5>
<p>with XML payload</p>
<p>In this example we will use following XML payload:</p>
<p><strong>Payload.</strong></p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;item-entry&gt;</span>
  <span class="nt">&lt;title&gt;</span>Example 1<span class="nt">&lt;/title&gt;</span>
  <span class="nt">&lt;content&gt;</span>Example content<span class="nt">&lt;/content&gt;</span>
<span class="nt">&lt;/item-entry&gt;</span>
</pre></div>
</div>
<p><strong>Request in XML.</strong></p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;data&gt;</span>
  <span class="nt">&lt;node&gt;</span>example<span class="nt">&lt;/node&gt;</span>
  <span class="nt">&lt;item-id&gt;</span>item-1<span class="nt">&lt;/item-id&gt;</span>
  <span class="nt">&lt;expire-at&gt;</span>2015-05-13T16:05:00+02:00<span class="nt">&lt;/expire-at&gt;</span>
  <span class="nt">&lt;entry&gt;</span>
    <span class="nt">&lt;item-entry&gt;</span>
      <span class="nt">&lt;title&gt;</span>Example 1<span class="nt">&lt;/title&gt;</span>
      <span class="nt">&lt;content&gt;</span>Example content<span class="nt">&lt;/content&gt;</span>
    <span class="nt">&lt;/item-entry&gt;</span>
  <span class="nt">&lt;/entry&gt;</span>
<span class="nt">&lt;/data&gt;</span>
</pre></div>
</div>
<p><strong>Response in XML.</strong></p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;result&gt;</span>
  <span class="nt">&lt;Note</span> <span class="na">type=</span><span class="s">&quot;fixed&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;value&gt;</span>Operation successful<span class="nt">&lt;/value&gt;</span>
  <span class="nt">&lt;/Note&gt;</span>
<span class="nt">&lt;/result&gt;</span>
</pre></div>
</div>
<p>with JSON payload</p>
<p>It is possible to publish JSON payload as value of published XML element. In example below we are publishing following JSON object:</p>
<p><strong>Payload.</strong></p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span> <span class="nt">&quot;key-1&quot;</span> <span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="nt">&quot;key-2&quot;</span> <span class="p">:</span> <span class="s2">&quot;value-2&quot;</span> <span class="p">}</span>
</pre></div>
</div>
<p><strong>Request in XML.</strong></p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;data&gt;</span>
  <span class="nt">&lt;node&gt;</span>example<span class="nt">&lt;/node&gt;</span>
  <span class="nt">&lt;item-id&gt;</span>item-1<span class="nt">&lt;/item-id&gt;</span>
  <span class="nt">&lt;expire-at&gt;</span>2015-05-13T16:05:00+02:00<span class="nt">&lt;/expire-at&gt;</span>
  <span class="nt">&lt;entry&gt;</span>
    <span class="nt">&lt;payload&gt;</span>{ <span class="ni">&amp;quot;</span>key-1<span class="ni">&amp;quot;</span> : 2, <span class="ni">&amp;quot;</span>key-2<span class="ni">&amp;quot;</span> : <span class="ni">&amp;quot;</span>value-2<span class="ni">&amp;quot;</span> }<span class="nt">&lt;/payload&gt;</span>
  <span class="nt">&lt;/entry&gt;</span>
<span class="nt">&lt;/data&gt;</span>
</pre></div>
</div>
<p><strong>Response in XML.</strong></p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;result&gt;</span>
  <span class="nt">&lt;Note</span> <span class="na">type=</span><span class="s">&quot;fixed&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;value&gt;</span>Operation successful<span class="nt">&lt;/value&gt;</span>
  <span class="nt">&lt;/Note&gt;</span>
<span class="nt">&lt;/result&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="id21">
<h5><span class="section-number">1.6.5.2.2. </span>Using JSON<a class="headerlink" href="#id21" title="Stały odnośnik do tego nagłówka">¶</a></h5>
<p>with XML payload</p>
<p>To publish XML using JSON you need to set serialized XML payload as value for <code class="docutils literal notranslate"><span class="pre">entry</span></code> key. In this example we will use following XML payload:</p>
<p><strong>Payload.</strong></p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;item-entry&gt;</span>
  <span class="nt">&lt;title&gt;</span>Example 1<span class="nt">&lt;/title&gt;</span>
  <span class="nt">&lt;content&gt;</span>Example content<span class="nt">&lt;/content&gt;</span>
<span class="nt">&lt;/item-entry&gt;</span>
</pre></div>
</div>
<p><strong>Request in JSON.</strong></p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;node&quot;</span> <span class="p">:</span> <span class="s2">&quot;example&quot;</span><span class="p">,</span>
  <span class="nt">&quot;item-id&quot;</span> <span class="p">:</span> <span class="s2">&quot;item-1&quot;</span><span class="p">,</span>
  <span class="nt">&quot;expire-at&quot;</span> <span class="p">:</span> <span class="s2">&quot;2015-05-13T16:05:00+02:00&quot;</span><span class="p">,</span>
  <span class="nt">&quot;entry&quot;</span> <span class="p">:</span> <span class="s2">&quot;&lt;item-entry&gt;</span>
<span class="s2">    &lt;title&gt;Example 1&lt;/title&gt;</span>
<span class="s2">    &lt;content&gt;Example content&lt;/content&gt;</span>
<span class="s2">  &lt;/item-entry&gt;&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>Response in JSON.</strong></p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;Note&quot;</span> <span class="p">:</span> <span class="s2">&quot;Operation successful&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>with JSON payload</p>
<p>As JSON needs to be set as a value of an XML element it will be wrapped on server side as a value for <code class="docutils literal notranslate"><span class="pre">&lt;payload/&gt;</span></code> element.</p>
<p><strong>Payload.</strong></p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span> <span class="nt">&quot;key-1&quot;</span> <span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="nt">&quot;key-2&quot;</span> <span class="p">:</span> <span class="s2">&quot;value-2&quot;</span> <span class="p">}</span>
</pre></div>
</div>
<p><strong>Request in JSON.</strong></p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;node&quot;</span> <span class="p">:</span> <span class="s2">&quot;example&quot;</span><span class="p">,</span>
  <span class="nt">&quot;item-id&quot;</span> <span class="p">:</span> <span class="s2">&quot;item-1&quot;</span><span class="p">,</span>
  <span class="nt">&quot;expire-at&quot;</span> <span class="p">:</span> <span class="s2">&quot;2015-05-13T16:05:00+02:00&quot;</span><span class="p">,</span>
  <span class="nt">&quot;entry&quot;</span> <span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;key-1&quot;</span> <span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
    <span class="nt">&quot;key-2&quot;</span> <span class="p">:</span> <span class="s2">&quot;value-2&quot;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>Response in JSON.</strong></p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;Note&quot;</span> <span class="p">:</span> <span class="s2">&quot;Operation successful&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>Published item.</strong></p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;payload&gt;</span>{ <span class="ni">&amp;quot;</span>key-1<span class="ni">&amp;quot;</span> : 2, <span class="ni">&amp;quot;</span>key-2<span class="ni">&amp;quot;</span> : <span class="ni">&amp;quot;</span>value-2<span class="ni">&amp;quot;</span> }<span class="nt">&lt;/payload&gt;</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="delete-an-item-from-a-node">
<h3><span class="section-number">1.6.6. </span>Delete an item from a node<a class="headerlink" href="#delete-an-item-from-a-node" title="Stały odnośnik do tego nagłówka">¶</a></h3>
<p>HTTP URI: <code class="docutils literal notranslate"><span class="pre">/rest/pubsub/pubsub.example.com/delete-item</span></code></p>
<p>Available HTTP methods:</p>
<div class="section" id="id22">
<h4><span class="section-number">1.6.6.1. </span>GET<a class="headerlink" href="#id22" title="Stały odnośnik do tego nagłówka">¶</a></h4>
<p>Method returns example content which contains all required and optional parameters that may be passed.</p>
</div>
<div class="section" id="id23">
<h4><span class="section-number">1.6.6.2. </span>POST<a class="headerlink" href="#id23" title="Stały odnośnik do tego nagłówka">¶</a></h4>
<p>Command requires fields <code class="docutils literal notranslate"><span class="pre">node</span></code> and <code class="docutils literal notranslate"><span class="pre">item-id</span></code> to be filled</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">node</span></code> - field contains id of node to publish to</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">item-id</span></code> - field contains id of entry to publish</p></li>
</ul>
<p>Example content to delete an item with id <code class="docutils literal notranslate"><span class="pre">item-1</span></code> from node with id <code class="docutils literal notranslate"><span class="pre">example</span></code>.</p>
<div class="section" id="id24">
<h5><span class="section-number">1.6.6.2.1. </span>Using XML<a class="headerlink" href="#id24" title="Stały odnośnik do tego nagłówka">¶</a></h5>
<p><strong>Request in XML.</strong></p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;data&gt;</span>
  <span class="nt">&lt;node&gt;</span>example<span class="nt">&lt;/node&gt;</span>
  <span class="nt">&lt;item-id&gt;</span>item-1<span class="nt">&lt;/item-id&gt;</span>
<span class="nt">&lt;/data&gt;</span>
</pre></div>
</div>
<p><strong>Response in XML.</strong></p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;result&gt;</span>
  <span class="nt">&lt;Note</span> <span class="na">type=</span><span class="s">&quot;fixed&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;value&gt;</span>Operation successful<span class="nt">&lt;/value&gt;</span>
  <span class="nt">&lt;/Note&gt;</span>
<span class="nt">&lt;/result&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="id25">
<h5><span class="section-number">1.6.6.2.2. </span>Using JSON<a class="headerlink" href="#id25" title="Stały odnośnik do tego nagłówka">¶</a></h5>
<p><strong>Request in JSON.</strong></p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;node&quot;</span> <span class="p">:</span> <span class="s2">&quot;example&quot;</span><span class="p">,</span>
  <span class="nt">&quot;item-id&quot;</span> <span class="p">:</span> <span class="s2">&quot;item-1&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>Response in JSON.</strong></p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;Note&quot;</span> <span class="p">:</span> <span class="s2">&quot;Operation successful&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="list-available-nodes">
<h3><span class="section-number">1.6.7. </span>List available nodes<a class="headerlink" href="#list-available-nodes" title="Stały odnośnik do tego nagłówka">¶</a></h3>
<p>HTTP URI: <code class="docutils literal notranslate"><span class="pre">/rest/pubsub/pubsub.example.com/list-nodes</span></code></p>
<p>Available HTTP methods:</p>
<div class="section" id="id26">
<h4><span class="section-number">1.6.7.1. </span>GET<a class="headerlink" href="#id26" title="Stały odnośnik do tego nagłówka">¶</a></h4>
<p>Method returns list of available pubsub nodes for domain passed as part of URI (<code class="docutils literal notranslate"><span class="pre">pubsub.example.com</span></code>).</p>
<p><strong>Example response in XML.</strong></p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;result&gt;</span>
  <span class="nt">&lt;title&gt;</span>List of available nodes<span class="nt">&lt;/title&gt;</span>
  <span class="nt">&lt;nodes</span> <span class="na">label=</span><span class="s">&quot;Nodes&quot;</span> <span class="na">type=</span><span class="s">&quot;text-multi&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;value&gt;</span>test<span class="nt">&lt;/value&gt;</span>
    <span class="nt">&lt;value&gt;</span>node_54idf40037<span class="nt">&lt;/value&gt;</span>
    <span class="nt">&lt;value&gt;</span>node_3ws5lz0037<span class="nt">&lt;/value&gt;</span>
  <span class="nt">&lt;/nodes&gt;</span>
<span class="nt">&lt;/result&gt;</span>
</pre></div>
</div>
<p>in which we see nodes: <code class="docutils literal notranslate"><span class="pre">test</span></code>, <code class="docutils literal notranslate"><span class="pre">node_54idf40037</span></code> and <code class="docutils literal notranslate"><span class="pre">node_3ws5lz0037</span></code>.</p>
<p><strong>Example response in JSON.</strong></p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;title&quot;</span> <span class="p">:</span> <span class="s2">&quot;List of available nodes&quot;</span><span class="p">,</span>
  <span class="nt">&quot;nodes&quot;</span> <span class="p">:</span> <span class="p">[</span>
    <span class="s2">&quot;test&quot;</span><span class="p">,</span>
    <span class="s2">&quot;node_54idf40037&quot;</span><span class="p">,</span>
    <span class="s2">&quot;node_3ws5lz0037&quot;</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>in which we see nodes: <code class="docutils literal notranslate"><span class="pre">test</span></code>, <code class="docutils literal notranslate"><span class="pre">node_54idf40037</span></code> and <code class="docutils literal notranslate"><span class="pre">node_3ws5lz0037</span></code>.</p>
</div>
</div>
<div class="section" id="list-published-items-on-node">
<h3><span class="section-number">1.6.8. </span>List published items on node<a class="headerlink" href="#list-published-items-on-node" title="Stały odnośnik do tego nagłówka">¶</a></h3>
<p>HTTP URI: <code class="docutils literal notranslate"><span class="pre">/rest/pubsub/pubsub.example.com/list-items</span></code></p>
<p>Available HTTP methods:</p>
<div class="section" id="id27">
<h4><span class="section-number">1.6.8.1. </span>GET<a class="headerlink" href="#id27" title="Stały odnośnik do tego nagłówka">¶</a></h4>
<p>Method returns example content which contains all required and optional parameters that may be passed.</p>
</div>
<div class="section" id="id28">
<h4><span class="section-number">1.6.8.2. </span>POST<a class="headerlink" href="#id28" title="Stały odnośnik do tego nagłówka">¶</a></h4>
<p>Command requires field <code class="docutils literal notranslate"><span class="pre">node</span></code> to be filled</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">node</span></code> - field contains id of node which items we want to list</p></li>
</ul>
<p>Example content to list of items published on node with id <code class="docutils literal notranslate"><span class="pre">example</span></code>.</p>
<div class="section" id="id29">
<h5><span class="section-number">1.6.8.2.1. </span>Using XML<a class="headerlink" href="#id29" title="Stały odnośnik do tego nagłówka">¶</a></h5>
<p><strong>Request in XML.</strong></p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;data&gt;</span>
  <span class="nt">&lt;node&gt;</span>example<span class="nt">&lt;/node&gt;</span>
<span class="nt">&lt;/data&gt;</span>
</pre></div>
</div>
<p><strong>Response in XML.</strong></p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;result&gt;</span>
  <span class="nt">&lt;title&gt;</span>List of PubSub node items<span class="nt">&lt;/title&gt;</span>
  <span class="nt">&lt;node</span> <span class="na">label=</span><span class="s">&quot;Node&quot;</span> <span class="na">type=</span><span class="s">&quot;text-single&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;value&gt;</span>example<span class="nt">&lt;/value&gt;</span>
  <span class="nt">&lt;/node&gt;</span>
  <span class="nt">&lt;items</span> <span class="na">label=</span><span class="s">&quot;Items&quot;</span> <span class="na">type=</span><span class="s">&quot;text-multi&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;value&gt;</span>item-1<span class="nt">&lt;/value&gt;</span>
    <span class="nt">&lt;value&gt;</span>item-2<span class="nt">&lt;/value&gt;</span>
  <span class="nt">&lt;/items&gt;</span>
<span class="nt">&lt;/result&gt;</span>
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">item-1</span></code> and <code class="docutils literal notranslate"><span class="pre">item-2</span></code> are identifiers of published items for node <code class="docutils literal notranslate"><span class="pre">example</span></code>.</p>
</div>
<div class="section" id="id30">
<h5><span class="section-number">1.6.8.2.2. </span>Using JSON<a class="headerlink" href="#id30" title="Stały odnośnik do tego nagłówka">¶</a></h5>
<p><strong>Request in JSON.</strong></p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;node&quot;</span> <span class="p">:</span> <span class="s2">&quot;example&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>Response in JSON.</strong></p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;title&quot;</span> <span class="p">:</span> <span class="s2">&quot;List of PubSub node items&quot;</span><span class="p">,</span>
  <span class="nt">&quot;node&quot;</span> <span class="p">:</span> <span class="s2">&quot;example&quot;</span><span class="p">,</span>
  <span class="nt">&quot;items&quot;</span> <span class="p">:</span> <span class="p">[</span>
    <span class="s2">&quot;item-1&quot;</span><span class="p">,</span>
    <span class="s2">&quot;item-2&quot;</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">item-1</span></code> and <code class="docutils literal notranslate"><span class="pre">item-2</span></code> are identifiers of published items for node <code class="docutils literal notranslate"><span class="pre">example</span></code>.</p>
</div>
</div>
</div>
<div class="section" id="retrieve-item-published-on-node">
<h3><span class="section-number">1.6.9. </span>Retrieve item published on node<a class="headerlink" href="#retrieve-item-published-on-node" title="Stały odnośnik do tego nagłówka">¶</a></h3>
<p>HTTP URI: <code class="docutils literal notranslate"><span class="pre">/rest/pubsub/pubsub.example.com/retrieve-item</span></code></p>
<p>Available HTTP methods:</p>
<div class="section" id="id31">
<h4><span class="section-number">1.6.9.1. </span>GET<a class="headerlink" href="#id31" title="Stały odnośnik do tego nagłówka">¶</a></h4>
<p>Method returns example content which contains all required and optional parameters that may be passed.</p>
</div>
<div class="section" id="id32">
<h4><span class="section-number">1.6.9.2. </span>POST<a class="headerlink" href="#id32" title="Stały odnośnik do tego nagłówka">¶</a></h4>
<p>Command requires fields <code class="docutils literal notranslate"><span class="pre">node</span></code> and <code class="docutils literal notranslate"><span class="pre">item-id</span></code> to be filled</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">node</span></code> - field contains id of node which items we want to list</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">item-id</span></code> - field contains id of item to retrieve</p></li>
</ul>
<p>Example content to list of items published on node with id <code class="docutils literal notranslate"><span class="pre">example</span></code>.</p>
<div class="section" id="id33">
<h5><span class="section-number">1.6.9.2.1. </span>Using XML<a class="headerlink" href="#id33" title="Stały odnośnik do tego nagłówka">¶</a></h5>
<p><strong>Request in XML.</strong></p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;data&gt;</span>
  <span class="nt">&lt;node&gt;</span>example<span class="nt">&lt;/node&gt;</span>
  <span class="nt">&lt;item-id&gt;</span>item-1<span class="nt">&lt;/item&gt;</span>
<span class="nt">&lt;/data&gt;</span>
</pre></div>
</div>
<p><strong>Response in XML.</strong></p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;result&gt;</span>
  <span class="nt">&lt;title&gt;</span>Retrieve PubSub node item<span class="nt">&lt;/title&gt;</span>
  <span class="nt">&lt;node</span> <span class="na">label=</span><span class="s">&quot;Node&quot;</span> <span class="na">type=</span><span class="s">&quot;text-single&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;value&gt;</span>example<span class="nt">&lt;/value&gt;</span>
  <span class="nt">&lt;/node&gt;</span>
  <span class="nt">&lt;item-id</span> <span class="na">label=</span><span class="s">&quot;Item ID&quot;</span> <span class="na">type=</span><span class="s">&quot;text-single&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;value&gt;</span>item-1<span class="nt">&lt;/value&gt;</span>
  <span class="nt">&lt;/item-id&gt;</span>
  <span class="nt">&lt;item</span> <span class="na">label=</span><span class="s">&quot;Item&quot;</span> <span class="na">type=</span><span class="s">&quot;text-multi&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;value&gt;</span>
      <span class="nt">&lt;item</span> <span class="na">expire-at=</span><span class="s">&quot;2015-05-13T14:05:00Z&quot;</span> <span class="na">id=</span><span class="s">&quot;item-1&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;item-entry&gt;</span>
          <span class="nt">&lt;title&gt;</span>Example 1<span class="nt">&lt;/title&gt;</span>
          <span class="nt">&lt;content&gt;</span>Example content<span class="nt">&lt;/content&gt;</span>
        <span class="nt">&lt;/item-entry&gt;</span>
      <span class="nt">&lt;/item&gt;</span>
    <span class="nt">&lt;/value&gt;</span>
  <span class="nt">&lt;/item&gt;</span>
<span class="nt">&lt;/result&gt;</span>
</pre></div>
</div>
<p>inside item element there is XML encoded element which is published on node <code class="docutils literal notranslate"><span class="pre">example</span></code> with id <code class="docutils literal notranslate"><span class="pre">item-1</span></code>.</p>
</div>
<div class="section" id="id34">
<h5><span class="section-number">1.6.9.2.2. </span>Using JSON<a class="headerlink" href="#id34" title="Stały odnośnik do tego nagłówka">¶</a></h5>
<p><strong>Request in JSON.</strong></p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;node&quot;</span> <span class="p">:</span> <span class="s2">&quot;example&quot;</span><span class="p">,</span>
  <span class="nt">&quot;item-id&quot;</span> <span class="p">:</span> <span class="s2">&quot;item-1&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>Response in JSON.</strong></p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;title&quot;</span> <span class="p">:</span> <span class="s2">&quot;Retrieve PubSub node item&quot;</span><span class="p">,</span>
  <span class="nt">&quot;node&quot;</span> <span class="p">:</span> <span class="s2">&quot;example&quot;</span><span class="p">,</span>
  <span class="nt">&quot;item-id&quot;</span> <span class="p">:</span> <span class="s2">&quot;item-1&quot;</span><span class="p">,</span>
  <span class="nt">&quot;item&quot;</span> <span class="p">:</span> <span class="p">[</span>
    <span class="s2">&quot;&lt;item expire-at\&quot;2015-05-13T14:05:00Z\&quot; id=\&quot;item-1\&quot;&gt;</span>
<span class="s2">      &lt;item-entry&gt;</span>
<span class="s2">        &lt;title&gt;Example 1&lt;/title&gt;</span>
<span class="s2">        &lt;content&gt;Example content&lt;/content&gt;</span>
<span class="s2">      &lt;/item-entry&gt;</span>
<span class="s2">    &lt;/item&gt;&quot;</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="retrieve-user-subscriptions">
<h3><span class="section-number">1.6.10. </span>Retrieve user subscriptions<a class="headerlink" href="#retrieve-user-subscriptions" title="Stały odnośnik do tego nagłówka">¶</a></h3>
<p>HTTP URI: <code class="docutils literal notranslate"><span class="pre">/rest/pubsub/pubsub.example.com/retrieve-user-subscriptions</span></code></p>
<p>Available HTTP methods:</p>
<div class="section" id="id35">
<h4><span class="section-number">1.6.10.1. </span>GET<a class="headerlink" href="#id35" title="Stały odnośnik do tego nagłówka">¶</a></h4>
<p>Method returns example content which contains all required and optional parameters that may be passed.</p>
</div>
<div class="section" id="id36">
<h4><span class="section-number">1.6.10.2. </span>POST<a class="headerlink" href="#id36" title="Stały odnośnik do tego nagłówka">¶</a></h4>
<p>Command requires field <code class="docutils literal notranslate"><span class="pre">jid</span></code> to be filled.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">jid</span></code> - field contains JID of a user for which we want to retrieve subscriptions</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">node-pattern</span></code> - field contains regex pattern to match. When field is not empty, request will return only subscribed nodes which match this pattern. If field should be empty it may be omitted in a request.</p></li>
</ul>
<p>Example content to retrieve list of nodes to which user <code class="docutils literal notranslate"><span class="pre">test&#64;example.com</span></code> is subscribed at <code class="docutils literal notranslate"><span class="pre">pubsub.example.com</span></code> which starts with <code class="docutils literal notranslate"><span class="pre">test-</span></code> (pattern <code class="docutils literal notranslate"><span class="pre">test-.*</span></code>)</p>
<div class="section" id="id37">
<h5><span class="section-number">1.6.10.2.1. </span>Using XML<a class="headerlink" href="#id37" title="Stały odnośnik do tego nagłówka">¶</a></h5>
<p><strong>Request in XML.</strong></p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;data&gt;</span>
  <span class="nt">&lt;jid&gt;</span>test@example.com<span class="nt">&lt;/jid&gt;</span>
  <span class="nt">&lt;node-pattern&gt;</span>test-.*<span class="nt">&lt;/node-pattern&gt;</span>
<span class="nt">&lt;/data&gt;</span>
</pre></div>
</div>
<p><strong>Response in XML.</strong></p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;result&gt;</span>
  <span class="nt">&lt;nodes</span> <span class="na">label=</span><span class="s">&quot;Nodes&quot;</span> <span class="na">type=</span><span class="s">&quot;text-multi&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;value&gt;</span>test-123<span class="nt">&lt;/value&gt;</span>
    <span class="nt">&lt;value&gt;</span>test-342<span class="nt">&lt;/value&gt;</span>
  <span class="nt">&lt;/nodes&gt;</span>
<span class="nt">&lt;/result&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="id38">
<h5><span class="section-number">1.6.10.2.2. </span>Using JSON<a class="headerlink" href="#id38" title="Stały odnośnik do tego nagłówka">¶</a></h5>
<p><strong>Request in JSON.</strong></p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;jid&quot;</span> <span class="p">:</span> <span class="s2">&quot;test@example.com&quot;</span><span class="p">,</span>
  <span class="nt">&quot;node-pattern&quot;</span> <span class="p">:</span> <span class="s2">&quot;test-.*&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>Response in JSON.</strong></p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;nodes&quot;</span> <span class="p">:</span> <span class="p">[</span>
    <span class="s2">&quot;test-123&quot;</span><span class="p">,</span>
    <span class="s2">&quot;test-342&quot;</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="Limitations.html" class="btn btn-neutral float-right" title="2. Limitations" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="index.html" class="btn btn-neutral float-left" title="Tigase PubSub Component - Version 5.1.0" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2004-2022, Tigase, Inc.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>